"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.readRegistryValue = void 0;
const regedit_1 = require("regedit");
/**
 * Returns `undefined` if the key does not exist.
 */
function readRegistryValue(key, subKey) {
    return new Promise((resolve, reject) => {
        regedit_1.default.list([key], (err, result) => {
            var _a;
            if (err) {
                reject(new Error(`Failed to read registry value ${key} (${err})`));
            }
            else {
                const values = (_a = result[key]) === null || _a === void 0 ? void 0 : _a.values;
                if (subKey in values) {
                    resolve(values[subKey].value);
                }
                else {
                    resolve(undefined);
                }
            }
        });
    });
}
exports.readRegistryValue = readRegistryValue;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVnaXN0cnkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbHMvcmVnaXN0cnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEscUNBQThCO0FBRTlCOztHQUVHO0FBQ0gsU0FBZ0IsaUJBQWlCLENBQUMsR0FBVyxFQUFFLE1BQWM7SUFDekQsT0FBTyxJQUFJLE9BQU8sQ0FBcUIsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUU7UUFDdkQsaUJBQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsRUFBRTs7WUFDaEMsSUFBSSxHQUFHLEVBQUU7Z0JBQ0wsTUFBTSxDQUFDLElBQUksS0FBSyxDQUFDLGlDQUFpQyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO2FBQ3RFO2lCQUFNO2dCQUNILE1BQU0sTUFBTSxHQUFHLE1BQUEsTUFBTSxDQUFDLEdBQUcsQ0FBQywwQ0FBRSxNQUFNLENBQUM7Z0JBQ25DLElBQUksTUFBTSxJQUFJLE1BQU0sRUFBRTtvQkFDbEIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFlLENBQUMsQ0FBQztpQkFDM0M7cUJBQU07b0JBQ0gsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO2lCQUN0QjthQUNKO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUFmRCw4Q0FlQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCByZWdlZGl0IGZyb20gJ3JlZ2VkaXQnO1xyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlIGtleSBkb2VzIG5vdCBleGlzdC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZWFkUmVnaXN0cnlWYWx1ZShrZXk6IHN0cmluZywgc3ViS2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IHVuZGVmaW5lZD4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZyB8IHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHJlZ2VkaXQubGlzdChba2V5XSwgKGVyciwgcmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoYEZhaWxlZCB0byByZWFkIHJlZ2lzdHJ5IHZhbHVlICR7a2V5fSAoJHtlcnJ9KWApKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IHJlc3VsdFtrZXldPy52YWx1ZXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3ViS2V5IGluIHZhbHVlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodmFsdWVzW3N1YktleV0udmFsdWUgYXMgc3RyaW5nKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4iXX0=