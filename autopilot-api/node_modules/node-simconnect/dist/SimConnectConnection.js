"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SimConnectConnection = void 0;
const events_1 = require("events");
const SimConnectDataType_1 = require("./enums/SimConnectDataType");
const RawBuffer_1 = require("./RawBuffer");
const connectionParameters_1 = require("./connectionParameters");
const TextType_1 = require("./enums/TextType");
const Protocol_1 = require("./enums/Protocol");
const SimConnectSocket_1 = require("./SimConnectSocket");
const DataSetFlag_1 = require("./flags/DataSetFlag");
const SimConnectConstants_1 = require("./SimConnectConstants");
const SimConnectPacketBuilder_1 = require("./SimConnectPacketBuilder");
const recv_1 = require("./recv");
const openPacketData = {
    [Protocol_1.Protocol.FSX_RTM]: {
        major: 0,
        minor: 0,
        buildMajor: 60905,
        buildMinor: 0,
        alias: 'XSF',
    },
    [Protocol_1.Protocol.FSX_SP1]: {
        major: 10,
        minor: 0,
        buildMajor: 61355,
        buildMinor: 0,
        alias: 'XSF',
    },
    [Protocol_1.Protocol.FSX_SP2]: {
        major: 10,
        minor: 0,
        buildMajor: 61259,
        buildMinor: 0,
        alias: 'XSF',
    },
    [Protocol_1.Protocol.KittyHawk]: {
        major: 11,
        minor: 0,
        buildMajor: 62651,
        buildMinor: 3,
        alias: 'HK', // "Hawk" + "Kitty"?
    },
};
var SimConnectError;
(function (SimConnectError) {
    SimConnectError["UnknownHost"] = "Unknown host";
    SimConnectError["GuidInvalidSize"] = "GUID is not 16 bytes long";
    SimConnectError["Unimplemented"] = "Not yet implemented";
    SimConnectError["VersionMismatch"] = "Invalid version2";
    SimConnectError["PacketTooLarge"] = "Packet too large";
    SimConnectError["InvalidRead"] = "Invalid read";
    SimConnectError["InvalidProtocol"] = "Invalid protocol version";
    SimConnectError["BadVersion"] = "Unsupported protocol version";
})(SimConnectError || (SimConnectError = {}));
class SimConnectConnection extends events_1.EventEmitter {
    constructor(appName, protocolVersion) {
        super();
        this._packetDataBuffer = new RawBuffer_1.RawBuffer(256);
        this.off = this.removeListener;
        this.addListener = this.on;
        this._appName = appName;
        this._packetsSent = 0;
        this._ourProtocol = protocolVersion;
        this._openTimeout = null;
        this._clientSocket = new SimConnectSocket_1.SimConnectSocket();
        this._clientSocket.on('connect', this._open.bind(this));
        this._clientSocket.on('data', this._handleMessage.bind(this));
        this._clientSocket.on('close', () => this.emit('close'));
        this._clientSocket.on('error', (connectError) => this.emit('error', connectError));
    }
    on(event, listener) {
        return super.on(event, listener);
    }
    once(event, listener) {
        return super.once(event, listener);
    }
    removeListener(event, listener) {
        return super.removeListener(event, listener);
    }
    removeAllListeners(event) {
        return super.removeAllListeners(event);
    }
    emit(event, ...args) {
        return super.emit(event, ...args);
    }
    connect(options) {
        if (options && 'host' in options && 'port' in options) {
            this._clientSocket.connect(Object.assign({ type: 'ipv4' }, options));
        }
        else if (options && 'remote' in options) {
            // For backwards-compatibility
            this._clientSocket.connect(Object.assign({ type: 'ipv4' }, options.remote));
        }
        else {
            (0, connectionParameters_1.autodetectServerAddress)(options === null || options === void 0 ? void 0 : options.simConnectCfgIndex).then((address) => {
                this._clientSocket.connect(address);
            });
        }
    }
    // eslint-disable-next-line
    requestResponseTimes(nCount) {
        // TODO: implement simconnect function
        // this one needs special care: it send a packet (id 0x03, one param : nCount)
        // and receive 8 float data (with response id 0x00010001) . Some calculations
        // has to be done
        throw Error(SimConnectError.Unimplemented);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    mapClientEventToSimEvent(clientEventId, eventName) {
        return this._buildAndSend(this._beginPacket(0x04)
            .putInt32(clientEventId)
            .putString256(eventName || ''));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    transmitClientEvent(objectId, clientEventId, data, notificationGroupId, flags) {
        return this._buildAndSend(this._beginPacket(0x05)
            .putInt32(objectId)
            .putInt32(clientEventId)
            .putInt32(data)
            .putInt32(notificationGroupId)
            .putInt32(flags));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    setSystemEventState(clientEventId, state) {
        return this._buildAndSend(this._beginPacket(0x06)
            .putInt32(clientEventId)
            .putInt32(state ? 1 : 0));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    addClientEventToNotificationGroup(notificationGroupId, clientEventId, maskable) {
        return this._buildAndSend(this._beginPacket(0x07)
            .putInt32(notificationGroupId)
            .putInt32(clientEventId)
            .putInt32(maskable ? 1 : 0));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    removeClientEvent(notificationGroupId, clientEventId) {
        return this._buildAndSend(this._beginPacket(0x08) //
            .putInt32(notificationGroupId)
            .putInt32(clientEventId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    setNotificationGroupPriority(notificationGroupId, priority) {
        return this._buildAndSend(this._beginPacket(0x09) //
            .putInt32(notificationGroupId)
            .putInt32(priority));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    clearNotificationGroup(notificationGroupId) {
        return this._buildAndSend(this._beginPacket(0x0a) //
            .putInt32(notificationGroupId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestNotificationGroup(notificationGroupId, reserved, flags) {
        return this._buildAndSend(this._beginPacket(0x0b) //
            .putInt32(notificationGroupId)
            .putInt32(reserved)
            .putInt32(flags));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    addToDataDefinition(dataDefinitionId, datumName, unitsName, dataType, epsilon, datumId) {
        return this._buildAndSend(this._beginPacket(0x0c)
            .putInt32(dataDefinitionId)
            .putString256(datumName)
            .putString256(unitsName)
            .putInt32(dataType === undefined ? SimConnectDataType_1.SimConnectDataType.FLOAT64 : dataType)
            .putFloat32(epsilon || 0)
            .putInt32(datumId === undefined ? SimConnectConstants_1.SimConnectConstants.UNUSED : datumId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    clearDataDefinition(dataDefinitionId) {
        return this._buildAndSend(this._beginPacket(0x0d) //
            .putInt32(dataDefinitionId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     *
     * @remarks
     * Listen for {@link SimConnectRecvEvents.simObjectData} to get the data.
     *
     * @example
     * ```ts
     * const LIVE_DATA_REQ_ID = 1234;
     *
     * handle.addToDataDefinition(
     *   LIVE_DATA_REQ_ID,
     *   'STRUCT LATLONALT',
     *   null,
     *   SimConnectDataType.LATLONALT
     * );
     *
     * handle.on('simObjectData', recvSimObjectData => {
     *   if (recvSimObjectData.requestID === LIVE_DATA_REQ_ID) {
     *     console.log(readLatLonAlt(recvSimObjectData.data));
     *   }
     * });
     * ```
     */
    requestDataOnSimObject(dataRequestId, dataDefinitionId, objectId, period, flags, origin, interval, limit) {
        return this._buildAndSend(this._beginPacket(0x0e)
            .putInt32(dataRequestId)
            .putInt32(dataDefinitionId)
            .putInt32(objectId)
            .putInt32(period)
            .putInt32(flags || 0)
            .putInt32(origin || 0)
            .putInt32(interval || 0)
            .putInt32(limit || 0));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     *
     * @remarks
     * Listen for {@link SimConnectRecvEvents.simObjectDataByType} to get the data.
     *
     */
    requestDataOnSimObjectType(dataRequestId, dataDefinitionId, radiusMeters, type) {
        return this._buildAndSend(this._beginPacket(0x0f)
            .putInt32(dataRequestId)
            .putInt32(dataDefinitionId)
            .putInt32(radiusMeters)
            .putInt32(type));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    setDataOnSimObject(dataDefinitionId, objectId, data) {
        const packet = this._beginPacket(0x10) //
            .putInt32(dataDefinitionId)
            .putInt32(objectId);
        if (data instanceof Array) {
            packet
                .putInt32(DataSetFlag_1.DataSetFlag.DEFAULT) //
                .putInt32(data.length) //
                .putInt32(0); // Just a placeholder for array unit size
            const arrayStartPos = packet.getRawBuffer().getOffset();
            data.forEach(simConnectData => {
                simConnectData.writeTo(packet);
            });
            const arrayTotalSize = packet.getRawBuffer().getOffset() - arrayStartPos;
            const unitSize = arrayTotalSize / data.length;
            packet.putInt32(unitSize, arrayStartPos - 4); // Replace placeholder
        }
        else {
            const { tagged, arrayCount, buffer } = data;
            const bytes = buffer.getBuffer();
            packet
                .putInt32(tagged ? DataSetFlag_1.DataSetFlag.TAGGED : DataSetFlag_1.DataSetFlag.DEFAULT)
                .putInt32(arrayCount === 0 ? 1 : arrayCount)
                .putInt32(bytes.length)
                .putBytes(bytes);
        }
        return this._buildAndSend(packet);
    }
    /**
     * @deprecated use mapInputEventToClientEventEx1 instead
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    mapInputEventToClientEvent(inputGroupId, inputDefinition, clientEventDownID, downValue, clientEventUpID, upValue, maskable) {
        return this._buildAndSend(this._beginPacket(0x11)
            .putInt32(inputGroupId)
            .putString256(inputDefinition)
            .putInt32(clientEventDownID)
            .putInt32(downValue || 0)
            .putInt32(clientEventUpID === undefined ? SimConnectConstants_1.SimConnectConstants.UNUSED : clientEventUpID)
            .putInt32(upValue || 0)
            .putInt32(maskable ? 1 : 0));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    setInputGroupPriority(inputGroupId, priority) {
        return this._buildAndSend(this._beginPacket(0x12) //
            .putInt32(inputGroupId)
            .putInt32(priority));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    removeInputEvent(inputGroupId, inputDefinition) {
        return this._buildAndSend(this._beginPacket(0x13) //
            .putInt32(inputGroupId)
            .putString256(inputDefinition));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    clearInputGroup(inputGroupId) {
        return this._buildAndSend(this._beginPacket(0x14) //
            .putInt32(inputGroupId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    setInputGroupState(inputGroupId, state) {
        return this._buildAndSend(this._beginPacket(0x15)
            .putInt32(inputGroupId)
            .putInt32(state ? 1 : 0));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestReservedKey(clientEventId, keyChoice1, keyChoice2, keyChoice3) {
        return this._buildAndSend(this._beginPacket(0x16)
            .putInt32(clientEventId)
            .putString(keyChoice1 || '', 30)
            .putString(keyChoice2 || '', 30)
            .putString(keyChoice3 || '', 30));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    subscribeToSystemEvent(clientEventId, eventName) {
        return this._buildAndSend(this._beginPacket(0x17) //
            .putInt32(clientEventId)
            .putString256(eventName));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    unsubscribeFromSystemEvent(clientEventId) {
        return this._buildAndSend(this._beginPacket(0x18) //
            .putInt32(clientEventId));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherRequestInterpolatedObservation(dataRequestId, lat, lon, alt) {
        return this._buildAndSend(this._beginPacket(0x19)
            .putInt32(dataRequestId)
            .putFloat32(lat)
            .putFloat32(lon)
            .putFloat32(alt));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherRequestObservationAtStation(dataRequestId, ICAO) {
        return this._buildAndSend(this._beginPacket(0x1a) //
            .putInt32(dataRequestId)
            .putString(ICAO, 5));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherRequestObservationAtNearestStation(dataRequestId, lat, lon) {
        return this._buildAndSend(this._beginPacket(0x1b) //
            .putInt32(dataRequestId)
            .putFloat32(lat)
            .putFloat32(lon));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherCreateStation(dataRequestId, ICAO, name, lat, lon, alt) {
        return this._buildAndSend(this._beginPacket(0x1c)
            .putInt32(dataRequestId)
            .putString(ICAO, 5)
            .putString256(name)
            .putFloat32(lat)
            .putFloat32(lon)
            .putFloat32(alt));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherRemoveStation(dataRequestId, ICAO) {
        return this._buildAndSend(this._beginPacket(0x1d) //
            .putInt32(dataRequestId)
            .putString(ICAO, 5));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherSetObservation(seconds, metar) {
        return this._buildAndSend(this._beginPacket(0x1e) //
            .putInt32(seconds)
            .putString(metar)
            .putByte(0));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherSetModeServer(port, seconds) {
        return this._buildAndSend(this._beginPacket(0x1f) //
            .putInt32(port)
            .putInt32(seconds));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherSetModeTheme(themeName) {
        return this._buildAndSend(this._beginPacket(0x20) //
            .putString256(themeName));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherSetModeGlobal() {
        return this._buildAndSend(this._beginPacket(0x21));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherSetModeCustom() {
        return this._buildAndSend(this._beginPacket(0x22));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherSetDynamicUpdateRate(rate) {
        return this._buildAndSend(this._beginPacket(0x23) //
            .putInt32(rate));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherRequestCloudState(dataRequestId, minLat, minLon, minAlt, maxLat, maxLon, maxAlt, flags) {
        return this._buildAndSend(this._beginPacket(0x24)
            .putInt32(dataRequestId)
            .putFloat32(minLat)
            .putFloat32(minLon)
            .putFloat32(minAlt)
            .putFloat32(maxLat)
            .putFloat32(maxLon)
            .putFloat32(maxAlt)
            .putInt32(flags || 0));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherCreateThermal(dataRequestId, lat, lon, alt, radius, height, coreRate, coreTurbulence, sinkRate, sinkTurbulence, coreSize, coreTransitionSize, sinkLayerSize, sinkTransitionSize) {
        return this._buildAndSend(this._beginPacket(0x25)
            .putInt32(dataRequestId)
            .putFloat32(lat)
            .putFloat32(lon)
            .putFloat32(alt)
            .putFloat32(radius)
            .putFloat32(height)
            .putFloat32(coreRate)
            .putFloat32(coreTurbulence)
            .putFloat32(sinkRate)
            .putFloat32(sinkTurbulence)
            .putFloat32(coreSize)
            .putFloat32(coreTransitionSize)
            .putFloat32(sinkLayerSize)
            .putFloat32(sinkTransitionSize));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherRemoveThermal(objectId) {
        return this._buildAndSend(this._beginPacket(0x26) //
            .putInt32(objectId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    aICreateParkedATCAircraft(containerTitle, tailNumber, airportID, dataRequestId) {
        return this._buildAndSend(this._beginPacket(0x27)
            .putString256(containerTitle)
            .putString(tailNumber, 12)
            .putString(airportID, 5)
            .putInt32(dataRequestId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    aICreateEnrouteATCAircraft(containerTitle, tailNumber, flightNumber, flightPlanPath, flightPlanPosition, touchAndGo, dataRequestId) {
        return this._buildAndSend(this._beginPacket(0x28)
            .putString256(containerTitle)
            .putString(tailNumber, 12)
            .putInt32(flightNumber)
            .putString(flightPlanPath, 260)
            .putFloat64(flightPlanPosition)
            .putInt32(touchAndGo ? 1 : 0)
            .putInt32(dataRequestId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    aICreateNonATCAircraft(containerTitle, tailNumber, initPos, dataRequestId) {
        const packet = this._beginPacket(0x29)
            .putString256(containerTitle)
            .putString(tailNumber, 12);
        initPos.writeTo(packet);
        packet.putInt32(dataRequestId);
        return this._buildAndSend(packet);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    aICreateSimulatedObject(containerTitle, initPos, dataRequestId) {
        const packet = this._beginPacket(0x2a);
        packet.putString256(containerTitle);
        initPos.writeTo(packet);
        packet.putInt32(dataRequestId);
        return this._buildAndSend(packet);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    aIReleaseControl(objectId, dataRequestId) {
        return this._buildAndSend(this._beginPacket(0x2b) //
            .putInt32(objectId)
            .putInt32(dataRequestId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    aIRemoveObject(objectId, dataRequestId) {
        return this._buildAndSend(this._beginPacket(0x2c) //
            .putInt32(objectId)
            .putInt32(dataRequestId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    aISetAircraftFlightPlan(objectId, flightPlanPath, dataRequestId) {
        return this._buildAndSend(this._beginPacket(0x2d)
            .putInt32(objectId)
            .putString(flightPlanPath, 260)
            .putInt32(dataRequestId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    executeMissionAction(guidInstanceId) {
        if (guidInstanceId.length !== 16)
            throw Error(SimConnectError.GuidInvalidSize);
        return this._buildAndSend(this._beginPacket(0x2e) //
            .putBytes(guidInstanceId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    completeCustomMissionAction(guidInstanceId) {
        if (guidInstanceId.length !== 16)
            throw Error(SimConnectError.GuidInvalidSize); // $NON-NLS-1$
        return this._buildAndSend(this._beginPacket(0x2f) //
            .putBytes(guidInstanceId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    cameraSetRelative6DOF(deltaX, deltaY, deltaZ, pitchDeg, bankDeg, headingDeg) {
        return this._buildAndSend(this._beginPacket(0x30)
            .putFloat32(deltaX)
            .putFloat32(deltaY)
            .putFloat32(deltaZ)
            .putFloat32(pitchDeg)
            .putFloat32(bankDeg)
            .putFloat32(headingDeg));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    menuAddItem(menuItem, menuEventId, data) {
        return this._buildAndSend(this._beginPacket(0x31) //
            .putString256(menuItem)
            .putInt32(menuEventId)
            .putInt32(data));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    menuDeleteItem(menuEventId) {
        return this._buildAndSend(this._beginPacket(0x32) //
            .putInt32(menuEventId));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    menuAddSubItem(menuEventId, menuItem, subMenuEventId, data) {
        return this._buildAndSend(this._beginPacket(0x33)
            .putInt32(menuEventId)
            .putString256(menuItem)
            .putInt32(subMenuEventId)
            .putInt32(data));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    menuDeleteSubItem(menuEventId, subMenuEventId) {
        return this._buildAndSend(this._beginPacket(0x34) //
            .putInt32(menuEventId)
            .putInt32(subMenuEventId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestSystemState(dataRequestId, state) {
        return this._buildAndSend(this._beginPacket(0x35) //
            .putInt32(dataRequestId)
            .putString256(state));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    setSystemState(state, paramInt, paramFloat, paramString) {
        return this._buildAndSend(this._beginPacket(0x36)
            .putString256(state)
            .putInt32(paramInt)
            .putFloat32(paramFloat)
            .putString256(paramString)
            .putInt32(0));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    mapClientDataNameToID(clientDataName, clientDataId) {
        return this._buildAndSend(this._beginPacket(0x37) //
            .putString256(clientDataName)
            .putInt32(clientDataId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    createClientData(clientDataId, size, readOnly) {
        return this._buildAndSend(this._beginPacket(0x38)
            .putInt32(clientDataId)
            .putInt32(size)
            .putInt32(readOnly ? 1 : 0));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    addToClientDataDefinition(dataDefinitionId, offset, sizeOrType, epsilon, datumId) {
        if (this._ourProtocol < Protocol_1.Protocol.FSX_SP1)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        return this._buildAndSend(this._beginPacket(0x39)
            .putInt32(dataDefinitionId)
            .putInt32(offset)
            .putInt32(sizeOrType)
            .putFloat32(epsilon || 0)
            .putInt32(datumId || 0));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    clearClientDataDefinition(dataDefinitionId) {
        return this._buildAndSend(this._beginPacket(0x3a) //
            .putInt32(dataDefinitionId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestClientData(clientDataId, dataRequestId, clientDataDefineID, period, flags, origin, interval, limit) {
        if (this._ourProtocol < Protocol_1.Protocol.FSX_SP1)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        return this._buildAndSend(this._beginPacket(0x3b)
            .putInt32(clientDataId)
            .putInt32(dataRequestId)
            .putInt32(clientDataDefineID)
            .putInt32(period)
            .putInt32(flags)
            .putInt32(origin || 0)
            .putInt32(interval || 0)
            .putInt32(limit || 0));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    setClientData(clientDataId, clientDataDefineID, reserved, arrayCount, unitSize, data) {
        return this._buildAndSend(this._beginPacket(0x3c)
            .putInt32(clientDataId)
            .putInt32(clientDataDefineID)
            .putInt32(0) // do not use arg
            .putInt32(1) // do not use arg
            // TODO: add support for arrays https://github.com/mharj/jsimconnect/blob/master/src/flightsim/simconnect/SimConnect.java#L3803
            .putInt32(unitSize)
            .putBytes(data));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    flightLoad(fileName) {
        this._buildAndSend(this._beginPacket(0x3d) //
            .putString(fileName, SimConnectConstants_1.SimConnectConstants.MAX_PATH));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    flightSave(fileName, title, description, flags // eslint-disable-line
    ) {
        // packet size 0x918 (SP1), 0xA1C (SP2)
        const packet = this._beginPacket(0x3e);
        packet.putString(fileName, SimConnectConstants_1.SimConnectConstants.MAX_PATH);
        if (this._ourProtocol >= Protocol_1.Protocol.FSX_SP2) {
            packet.putString(title === null ? fileName : title, SimConnectConstants_1.SimConnectConstants.MAX_PATH);
        }
        packet.putString(description, 2048);
        packet.putInt32(SimConnectConstants_1.SimConnectConstants.UNUSED);
        return this._buildAndSend(packet);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    flightPlanLoad(fileName) {
        return this._buildAndSend(this._beginPacket(0x3f) //
            .putString(fileName, SimConnectConstants_1.SimConnectConstants.MAX_PATH));
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    text(type, timeSeconds, clientEventId, message) {
        if (this._ourProtocol < Protocol_1.Protocol.FSX_SP1)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        const packet = this._beginPacket(0x40)
            .putInt32(type)
            .putFloat32(timeSeconds)
            .putInt32(clientEventId);
        if (message !== null && message.length > 0) {
            packet.putInt32(message.length + 1);
            packet.putString(message);
        }
        else {
            packet.putInt32(1);
        }
        packet.putByte(0);
        return this._buildAndSend(packet);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    menu(timeSeconds, clientEventId, title, prompt, ...items) {
        if (this._ourProtocol < Protocol_1.Protocol.FSX_SP1)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        const packet = this._beginPacket(0x40)
            .putInt32(TextType_1.TextType.MENU)
            .putFloat32(timeSeconds)
            .putInt32(clientEventId)
            .putInt32(0); // size, will be set later
        if (!title && !prompt && items.length === 0) {
            packet.putByte(0);
        }
        else if (title && prompt) {
            packet
                .putString(title) //
                .putByte(0)
                .putString(prompt)
                .putByte(0);
            items.forEach(s => {
                packet.putString(s).putByte(0);
            });
        }
        // set size
        packet.putInt32(packet.getRawBuffer().getOffset() - 32, 28);
        return this._buildAndSend(packet);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    subscribeToFacilities(type, clientEventId) {
        if (this._ourProtocol < Protocol_1.Protocol.FSX_SP1)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        return this._buildAndSend(this._beginPacket(0x41) //
            .putInt32(type)
            .putInt32(clientEventId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    unSubscribeToFacilities(type) {
        if (this._ourProtocol < Protocol_1.Protocol.FSX_SP1)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        return this._buildAndSend(this._beginPacket(0x42) //
            .putInt32(type));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestFacilitiesList(type, clientEventId) {
        if (this._ourProtocol < Protocol_1.Protocol.FSX_SP1)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        return this._buildAndSend(this._beginPacket(0x43) //
            .putInt32(type)
            .putInt32(clientEventId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    transmitClientEventEx(objectId, clientEventId, notificationGroupId, flags, data0 = 0, data1 = 0, data2 = 0, data3 = 0, data4 = 0) {
        return this._buildAndSend(this._beginPacket(0x44)
            .putInt32(objectId)
            .putInt32(clientEventId)
            .putInt32(notificationGroupId)
            .putInt32(flags)
            .putInt32(data0)
            .putInt32(data1)
            .putInt32(data2)
            .putInt32(data3)
            .putInt32(data4));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    addToFacilityDefinition(dataDefinitionId, fieldName) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion);
        return this._buildAndSend(this._beginPacket(0x45) //
            .putInt32(dataDefinitionId)
            .putString256(fieldName));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestFacilityData(dataDefinitionId, dataRequestId, icao, region, type) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion);
        const packet = this._beginPacket(type === undefined ? 0x46 : 0x4a)
            .putInt32(dataDefinitionId)
            .putInt32(dataRequestId)
            .putString(icao, 16)
            .putString(region || '', 4);
        if (type !== undefined) {
            // SimConnect_RequestFacilityData
            packet.putString(type, 1);
        }
        return this._buildAndSend(packet);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    subscribeToFacilitiesEx1(type, newElemInRangeRequestID, oldElemOutRangeRequestID) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        return this._buildAndSend(this._beginPacket(0x47) //
            .putInt32(type)
            .putInt32(newElemInRangeRequestID)
            .putInt32(oldElemOutRangeRequestID));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    unSubscribeToFacilitiesEx1(type, unsubscribeNewInRange, unsubscribeOldOutRange) {
        if (this._ourProtocol < Protocol_1.Protocol.FSX_SP1)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        return this._buildAndSend(this._beginPacket(0x48) //
            .putInt32(type)
            .putByte(unsubscribeNewInRange ? 1 : 0)
            .putByte(unsubscribeOldOutRange ? 1 : 0));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestFacilitiesListEx1(type, clientEventId) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        return this._buildAndSend(this._beginPacket(0x49) //
            .putInt32(type)
            .putInt32(clientEventId));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestJetwayData(airportIcao, parkingIndices) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion);
        const packet = this._beginPacket(0x4b)
            .putString(airportIcao, 16)
            .putInt32((parkingIndices === null || parkingIndices === void 0 ? void 0 : parkingIndices.length) || 0);
        if (parkingIndices === undefined || parkingIndices.length === 0) {
            packet.putInt32(0);
        }
        else {
            parkingIndices.forEach(parkingIndex => {
                packet.putInt32(parkingIndex);
            });
        }
        return this._buildAndSend(packet);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    enumerateControllers() {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion);
        const packet = this._beginPacket(0x4c);
        return this._buildAndSend(packet);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    mapInputEventToClientEventEx1(inputGroupId, inputDefinition, clientEventDownID, downValue, // 0
    clientEventUpID, // SimConnectConstants.UNUSED
    upValue, // 0,
    maskable // false
    ) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion);
        return this._buildAndSend(this._beginPacket(0x4d)
            .putInt32(inputGroupId)
            .putString256(inputDefinition)
            .putInt32(clientEventDownID)
            .putInt32(downValue || 0)
            .putInt32(clientEventUpID === undefined ? SimConnectConstants_1.SimConnectConstants.UNUSED : clientEventUpID)
            .putInt32(upValue || 0)
            .putInt32(maskable ? 1 : 0));
    }
    /**
     * See https://www.fsdeveloper.com/wiki/index.php/MSFS_Mission_Script_-_Actions
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    executeAction(dataRequestID, actionID, values) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion);
        const paramValues = values.getBuffer();
        const packet = this._beginPacket(0x4e)
            .putInt32(dataRequestID)
            .putString256(actionID)
            .putInt32(paramValues.length)
            .putBytes(paramValues);
        return this._buildAndSend(packet);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    enumerateInputEvents(dataRequestID) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion);
        const packet = this._beginPacket(0x4f).putInt32(dataRequestID);
        return this._buildAndSend(packet);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    getInputEvent(dataRequestID, inputEventHashID) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion);
        const packet = this._beginPacket(0x50).putInt32(dataRequestID).putUint64(inputEventHashID);
        return this._buildAndSend(packet);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    setInputEvent(inputEventHashID, value) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion);
        const packet = this._beginPacket(0x51).putUint64(inputEventHashID);
        if (typeof value === 'string') {
            packet.putInt32(value.length).putString(value);
        }
        else {
            packet.putInt32(8).putFloat64(value);
        }
        return this._buildAndSend(packet);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    subscribeInputEvent(inputEventHashID) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion);
        return this._buildAndSend(this._beginPacket(0x52).putUint64(inputEventHashID));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    unsubscribeInputEvent(inputEventHashID) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion);
        return this._buildAndSend(this._beginPacket(0x53).putUint64(inputEventHashID));
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    enumerateInputEventParams(inputEventHashID) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion);
        return this._buildAndSend(this._beginPacket(0x54).putUint64(inputEventHashID));
    }
    /**
     *
     * @param dataDefinitionId -
     * @param filterPath -
     * @param filterData - use null to remove a previously applied filter
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    addFacilityDataDefinitionFilter(dataDefinitionId, filterPath, filterData) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion);
        const packet = this._beginPacket(0x55).putInt32(dataDefinitionId).putString256(filterPath);
        if (filterData === null) {
            packet.putInt32(0);
        }
        else {
            const filterDataBuffer = filterData.getBuffer();
            packet.putInt32(filterDataBuffer.length).putBytes(filterDataBuffer);
        }
        return this._buildAndSend(packet);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    clearAllFacilityDataDefinitionFilters(dataDefinitionId) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion);
        return this._buildAndSend(this._beginPacket(0x56).putInt32(dataDefinitionId));
    }
    close() {
        if (this._openTimeout !== null) {
            clearTimeout(this._openTimeout);
            this._openTimeout = null;
        }
        this._clientSocket.close();
    }
    getLastSentPacketID() {
        return this._packetsSent - 1;
    }
    _beginPacket(packetId) {
        return new SimConnectPacketBuilder_1.SimConnectPacketBuilder(packetId, this._ourProtocol, this._packetDataBuffer);
    }
    _buildAndSend(builder) {
        const thisPacketId = this._packetsSent;
        this._clientSocket.write(builder.build(thisPacketId));
        this._packetsSent++;
        return thisPacketId;
    }
    _handleMessage({ packetTypeId, data }) {
        if (!(packetTypeId in SimConnectSocket_1.RecvID)) {
            console.log('Unknown packet type id', packetTypeId, data);
        }
        switch (packetTypeId) {
            case SimConnectSocket_1.RecvID.ID_NULL:
                break;
            case SimConnectSocket_1.RecvID.ID_EXCEPTION:
                this.emit('exception', new recv_1.RecvException(data));
                break;
            case SimConnectSocket_1.RecvID.ID_OPEN:
                if (this._openTimeout !== null) {
                    clearTimeout(this._openTimeout);
                    this._openTimeout = null;
                }
                this.emit('open', new recv_1.RecvOpen(data));
                break;
            case SimConnectSocket_1.RecvID.ID_QUIT:
                this.emit('quit');
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT:
                this.emit('event', new recv_1.RecvEvent(data));
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_OBJECT_ADDREMOVE:
                this.emit('eventAddRemove', new recv_1.RecvEventAddRemove(data));
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_FILENAME:
                this.emit('eventFilename', new recv_1.RecvEventFilename(data));
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_FRAME:
                this.emit('eventFrame', new recv_1.RecvEventFrame(data));
                break;
            case SimConnectSocket_1.RecvID.ID_SIMOBJECT_DATA:
                this.emit('simObjectData', new recv_1.RecvSimObjectData(data));
                break;
            case SimConnectSocket_1.RecvID.ID_SIMOBJECT_DATA_BYTYPE:
                this.emit('simObjectDataByType', new recv_1.RecvSimObjectData(data));
                break;
            case SimConnectSocket_1.RecvID.ID_WEATHER_OBSERVATION:
                this.emit('weatherObservation', new recv_1.RecvWeatherObservation(data));
                break;
            case SimConnectSocket_1.RecvID.ID_CLOUD_STATE:
                this.emit('cloudState', new recv_1.RecvCloudState(data));
                break;
            case SimConnectSocket_1.RecvID.ID_ASSIGNED_OBJECT_ID:
                this.emit('assignedObjectID', new recv_1.RecvAssignedObjectID(data));
                break;
            case SimConnectSocket_1.RecvID.ID_RESERVED_KEY:
                this.emit('reservedKey', new recv_1.RecvReservedKey(data));
                break;
            case SimConnectSocket_1.RecvID.ID_CUSTOM_ACTION:
                this.emit('customAction', new recv_1.RecvCustomAction(data));
                break;
            case SimConnectSocket_1.RecvID.ID_SYSTEM_STATE:
                this.emit('systemState', new recv_1.RecvSystemState(data));
                break;
            case SimConnectSocket_1.RecvID.ID_CLIENT_DATA:
                this.emit('clientData', new recv_1.RecvSimObjectData(data));
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_WEATHER_MODE:
                this.emit('eventWeatherMode', new recv_1.RecvEventWeatherMode(data));
                break;
            case SimConnectSocket_1.RecvID.ID_AIRPORT_LIST:
                this.emit('airportList', new recv_1.RecvAirportList(data));
                break;
            case SimConnectSocket_1.RecvID.ID_VOR_LIST:
                this.emit('vorList', new recv_1.RecvVORList(data));
                break;
            case SimConnectSocket_1.RecvID.ID_NDB_LIST:
                this.emit('ndbList', new recv_1.RecvNDBList(data));
                break;
            case SimConnectSocket_1.RecvID.ID_WAYPOINT_LIST:
                this.emit('waypointList', new recv_1.RecvWaypointList(data));
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_MULTIPLAYER_SERVER_STARTED:
                this.emit('eventMultiplayerServerStarted');
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_MULTIPLAYER_CLIENT_STARTED:
                this.emit('eventMultiplayerClientStarted');
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_MULTIPLAYER_SESSION_ENDED:
                this.emit('eventMultiplayerSessionEnded');
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_RACE_END:
                this.emit('eventRaceEnd', new recv_1.RecvEventRaceEnd(data));
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_RACE_LAP:
                this.emit('eventRaceLap', new recv_1.RecvEventRaceLap(data));
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_EX1:
                this.emit('eventEx1', new recv_1.RecvEventEx1(data));
                break;
            case SimConnectSocket_1.RecvID.ID_FACILITY_DATA:
                this.emit('facilityData', new recv_1.RecvFacilityData(data));
                break;
            case SimConnectSocket_1.RecvID.ID_FACILITY_DATA_END:
                this.emit('facilityDataEnd', new recv_1.RecvFacilityDataEnd(data));
                break;
            case SimConnectSocket_1.RecvID.ID_FACILITY_MINIMAL_LIST:
                this.emit('facilityMinimalList', new recv_1.RecvFacilityMinimalList(data));
                break;
            case SimConnectSocket_1.RecvID.ID_JETWAY_DATA:
                this.emit('jetwayData', new recv_1.RecvJetwayData(data));
                break;
            case SimConnectSocket_1.RecvID.ID_CONTROLLERS_LIST:
                this.emit('controllersList', new recv_1.RecvControllersList(data));
                break;
            case SimConnectSocket_1.RecvID.ID_ACTION_CALLBACK:
                this.emit('actionCallback', new recv_1.RecvActionCallback(data));
                break;
            case SimConnectSocket_1.RecvID.ID_ENUMERATE_INPUT_EVENTS:
                this.emit('inputEventsList', new recv_1.RecvEnumerateInputEvents(data));
                break;
            case SimConnectSocket_1.RecvID.ID_GET_INPUT_EVENT:
                this.emit('getInputEvent', new recv_1.RecvGetInputEvent(data));
                break;
            case SimConnectSocket_1.RecvID.ID_SUBSCRIBE_INPUT_EVENT:
                this.emit('subscribeInputEvent', new recv_1.RecvSubscribeInputEvent(data));
                break;
            case SimConnectSocket_1.RecvID.ID_ENUMERATE_INPUT_EVENT_PARAMS:
                this.emit('enumerateInputEventParams', new recv_1.RecvEnumerateInputEventParams(data));
                break;
        }
    }
    _open() {
        this._openTimeout = setTimeout(() => {
            this.close();
            this.emit('error', Error('Open timeout'));
        }, 5000);
        const version = openPacketData[this._ourProtocol];
        if (!version) {
            throw Error(SimConnectError.InvalidProtocol);
        }
        this._buildAndSend(this._beginPacket(0x01)
            .putString256(this._appName)
            .putInt32(0)
            .putByte(0x00)
            .putString(version.alias, 3)
            .putInt32(version.major)
            .putInt32(version.minor)
            .putInt32(version.buildMajor)
            .putInt32(version.buildMinor));
    }
}
exports.SimConnectConnection = SimConnectConnection;
module.exports = { SimConnectConnection };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2ltQ29ubmVjdENvbm5lY3Rpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvU2ltQ29ubmVjdENvbm5lY3Rpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsbUNBQXNDO0FBQ3RDLG1FQUFnRTtBQUdoRSwyQ0FBd0M7QUFDeEMsaUVBQXVGO0FBR3ZGLCtDQUE0QztBQUc1QywrQ0FBNEM7QUFDNUMseURBQWlGO0FBR2pGLHFEQUFrRDtBQUVsRCwrREFBNEQ7QUFDNUQsdUVBQW9FO0FBQ3BFLGlDQWdDZ0I7QUFxQmhCLE1BQU0sY0FBYyxHQUEwQztJQUMxRCxDQUFDLG1CQUFRLENBQUMsT0FBTyxDQUFDLEVBQUU7UUFDaEIsS0FBSyxFQUFFLENBQUM7UUFDUixLQUFLLEVBQUUsQ0FBQztRQUNSLFVBQVUsRUFBRSxLQUFLO1FBQ2pCLFVBQVUsRUFBRSxDQUFDO1FBQ2IsS0FBSyxFQUFFLEtBQUs7S0FDZjtJQUNELENBQUMsbUJBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRTtRQUNoQixLQUFLLEVBQUUsRUFBRTtRQUNULEtBQUssRUFBRSxDQUFDO1FBQ1IsVUFBVSxFQUFFLEtBQUs7UUFDakIsVUFBVSxFQUFFLENBQUM7UUFDYixLQUFLLEVBQUUsS0FBSztLQUNmO0lBQ0QsQ0FBQyxtQkFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQ2hCLEtBQUssRUFBRSxFQUFFO1FBQ1QsS0FBSyxFQUFFLENBQUM7UUFDUixVQUFVLEVBQUUsS0FBSztRQUNqQixVQUFVLEVBQUUsQ0FBQztRQUNiLEtBQUssRUFBRSxLQUFLO0tBQ2Y7SUFDRCxDQUFDLG1CQUFRLENBQUMsU0FBUyxDQUFDLEVBQUU7UUFDbEIsS0FBSyxFQUFFLEVBQUU7UUFDVCxLQUFLLEVBQUUsQ0FBQztRQUNSLFVBQVUsRUFBRSxLQUFLO1FBQ2pCLFVBQVUsRUFBRSxDQUFDO1FBQ2IsS0FBSyxFQUFFLElBQUksRUFBRSxvQkFBb0I7S0FDcEM7Q0FDSixDQUFDO0FBbURG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QVEsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQ3BDLENBQUM7SUFDTixDQUFDO0NBQ0o7QUFFUSxvREFBb0I7QUFDN0IsTUFBTSxDQUFDLE9BQU8sR0FBRyxFQUFFLG9CQUFvQixFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnO1xuaW1wb3J0IHsgU2ltQ29ubmVjdERhdGFUeXBlIH0gZnJvbSAnLi9lbnVtcy9TaW1Db25uZWN0RGF0YVR5cGUnO1xuaW1wb3J0IHsgU2ltQ29ubmVjdFBlcmlvZCB9IGZyb20gJy4vZW51bXMvU2ltQ29ubmVjdFBlcmlvZCc7XG5pbXBvcnQgeyBTaW1PYmplY3RUeXBlIH0gZnJvbSAnLi9lbnVtcy9TaW1PYmplY3RUeXBlJztcbmltcG9ydCB7IFJhd0J1ZmZlciB9IGZyb20gJy4vUmF3QnVmZmVyJztcbmltcG9ydCB7IGF1dG9kZXRlY3RTZXJ2ZXJBZGRyZXNzLCBDb25uZWN0aW9uUGFyYW1ldGVycyB9IGZyb20gJy4vY29ubmVjdGlvblBhcmFtZXRlcnMnO1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uUHJpb3JpdHkgfSBmcm9tICcuL2VudW1zL05vdGlmaWNhdGlvblByaW9yaXR5JztcbmltcG9ydCB7IEljYW9UeXBlLCBJbml0UG9zaXRpb24sIFNpbUNvbm5lY3REYXRhIH0gZnJvbSAnLi9kdG8nO1xuaW1wb3J0IHsgVGV4dFR5cGUgfSBmcm9tICcuL2VudW1zL1RleHRUeXBlJztcbmltcG9ydCB7IEZhY2lsaXR5TGlzdFR5cGUgfSBmcm9tICcuL2VudW1zL0ZhY2lsaXR5TGlzdFR5cGUnO1xuaW1wb3J0IHsgQ2xpZW50RGF0YVBlcmlvZCB9IGZyb20gJy4vZW51bXMvQ2xpZW50RGF0YVBlcmlvZCc7XG5pbXBvcnQgeyBQcm90b2NvbCB9IGZyb20gJy4vZW51bXMvUHJvdG9jb2wnO1xuaW1wb3J0IHsgUmVjdklELCBTaW1Db25uZWN0TWVzc2FnZSwgU2ltQ29ubmVjdFNvY2tldCB9IGZyb20gJy4vU2ltQ29ubmVjdFNvY2tldCc7XG5pbXBvcnQgeyBEYXRhUmVxdWVzdEZsYWcgfSBmcm9tICcuL2ZsYWdzL0RhdGFSZXF1ZXN0RmxhZyc7XG5pbXBvcnQgeyBFdmVudEZsYWcgfSBmcm9tICcuL2ZsYWdzL0V2ZW50RmxhZyc7XG5pbXBvcnQgeyBEYXRhU2V0RmxhZyB9IGZyb20gJy4vZmxhZ3MvRGF0YVNldEZsYWcnO1xuaW1wb3J0IHsgQ2xpZW50RGF0YVJlcXVlc3RGbGFnIH0gZnJvbSAnLi9mbGFncy9DbGllbnREYXRhUmVxdWVzdEZsYWcnO1xuaW1wb3J0IHsgU2ltQ29ubmVjdENvbnN0YW50cyB9IGZyb20gJy4vU2ltQ29ubmVjdENvbnN0YW50cyc7XG5pbXBvcnQgeyBTaW1Db25uZWN0UGFja2V0QnVpbGRlciB9IGZyb20gJy4vU2ltQ29ubmVjdFBhY2tldEJ1aWxkZXInO1xuaW1wb3J0IHtcbiAgICBSZWN2QWN0aW9uQ2FsbGJhY2ssXG4gICAgUmVjdkFpcnBvcnRMaXN0LFxuICAgIFJlY3ZBc3NpZ25lZE9iamVjdElELFxuICAgIFJlY3ZDbG91ZFN0YXRlLFxuICAgIFJlY3ZDb250cm9sbGVyc0xpc3QsXG4gICAgUmVjdkN1c3RvbUFjdGlvbixcbiAgICBSZWN2RW51bWVyYXRlSW5wdXRFdmVudFBhcmFtcyxcbiAgICBSZWN2RW51bWVyYXRlSW5wdXRFdmVudHMsXG4gICAgUmVjdkV2ZW50LFxuICAgIFJlY3ZFdmVudEFkZFJlbW92ZSxcbiAgICBSZWN2RXZlbnRFeDEsXG4gICAgUmVjdkV2ZW50RmlsZW5hbWUsXG4gICAgUmVjdkV2ZW50RnJhbWUsXG4gICAgUmVjdkV2ZW50UmFjZUVuZCxcbiAgICBSZWN2RXZlbnRSYWNlTGFwLFxuICAgIFJlY3ZFdmVudFdlYXRoZXJNb2RlLFxuICAgIFJlY3ZFeGNlcHRpb24sXG4gICAgUmVjdkZhY2lsaXR5RGF0YSxcbiAgICBSZWN2RmFjaWxpdHlEYXRhRW5kLFxuICAgIFJlY3ZGYWNpbGl0eU1pbmltYWxMaXN0LFxuICAgIFJlY3ZHZXRJbnB1dEV2ZW50LFxuICAgIFJlY3ZKZXR3YXlEYXRhLFxuICAgIFJlY3ZOREJMaXN0LFxuICAgIFJlY3ZPcGVuLFxuICAgIFJlY3ZSZXNlcnZlZEtleSxcbiAgICBSZWN2U2ltT2JqZWN0RGF0YSxcbiAgICBSZWN2U3Vic2NyaWJlSW5wdXRFdmVudCxcbiAgICBSZWN2U3lzdGVtU3RhdGUsXG4gICAgUmVjdlZPUkxpc3QsXG4gICAgUmVjdldheXBvaW50TGlzdCxcbiAgICBSZWN2V2VhdGhlck9ic2VydmF0aW9uLFxufSBmcm9tICcuL3JlY3YnO1xuaW1wb3J0IHtcbiAgICBDbGllbnREYXRhRGVmaW5pdGlvbklkLFxuICAgIENsaWVudERhdGFJZCxcbiAgICBDbGllbnRFdmVudElkLFxuICAgIERhdGFEZWZpbml0aW9uSWQsXG4gICAgRGF0YVJlcXVlc3RJZCxcbiAgICBJbnB1dEdyb3VwSWQsXG4gICAgTm90aWZpY2F0aW9uR3JvdXBJZCxcbiAgICBPYmplY3RJZCxcbn0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgVGltZW91dCA9IE5vZGVKUy5UaW1lb3V0O1xuXG50eXBlIE9wZW5QYWNrZXREYXRhID0ge1xuICAgIG1ham9yOiBudW1iZXI7XG4gICAgbWlub3I6IG51bWJlcjtcbiAgICBidWlsZE1ham9yOiBudW1iZXI7XG4gICAgYnVpbGRNaW5vcjogbnVtYmVyO1xuICAgIGFsaWFzOiBzdHJpbmc7XG59O1xuXG5jb25zdCBvcGVuUGFja2V0RGF0YTogeyBba2V5IGluIFByb3RvY29sXTogT3BlblBhY2tldERhdGEgfSA9IHtcbiAgICBbUHJvdG9jb2wuRlNYX1JUTV06IHtcbiAgICAgICAgbWFqb3I6IDAsXG4gICAgICAgIG1pbm9yOiAwLFxuICAgICAgICBidWlsZE1ham9yOiA2MDkwNSxcbiAgICAgICAgYnVpbGRNaW5vcjogMCxcbiAgICAgICAgYWxpYXM6ICdYU0YnLFxuICAgIH0sXG4gICAgW1Byb3RvY29sLkZTWF9TUDFdOiB7XG4gICAgICAgIG1ham9yOiAxMCxcbiAgICAgICAgbWlub3I6IDAsXG4gICAgICAgIGJ1aWxkTWFqb3I6IDYxMzU1LFxuICAgICAgICBidWlsZE1pbm9yOiAwLFxuICAgICAgICBhbGlhczogJ1hTRicsXG4gICAgfSxcbiAgICBbUHJvdG9jb2wuRlNYX1NQMl06IHtcbiAgICAgICAgbWFqb3I6IDEwLFxuICAgICAgICBtaW5vcjogMCxcbiAgICAgICAgYnVpbGRNYWpvcjogNjEyNTksXG4gICAgICAgIGJ1aWxkTWlub3I6IDAsXG4gICAgICAgIGFsaWFzOiAnWFNGJyxcbiAgICB9LFxuICAgIFtQcm90b2NvbC5LaXR0eUhhd2tdOiB7XG4gICAgICAgIG1ham9yOiAxMSxcbiAgICAgICAgbWlub3I6IDAsXG4gICAgICAgIGJ1aWxkTWFqb3I6IDYyNjUxLFxuICAgICAgICBidWlsZE1pbm9yOiAzLFxuICAgICAgICBhbGlhczogJ0hLJywgLy8gXCJIYXdrXCIgKyBcIktpdHR5XCI/XG4gICAgfSxcbn07XG5cbmludGVyZmFjZSBTaW1Db25uZWN0UmVjdkV2ZW50cyB7XG4gICAgb3BlbjogKHJlY3ZPcGVuOiBSZWN2T3BlbikgPT4gdm9pZDtcbiAgICBjbG9zZTogKCkgPT4gdm9pZDtcbiAgICBlcnJvcjogKGVycm9yOiBFcnJvcikgPT4gdm9pZDtcbiAgICBxdWl0OiAoKSA9PiB2b2lkO1xuICAgIGV4Y2VwdGlvbjogKHJlY3ZFeGNlcHRpb246IFJlY3ZFeGNlcHRpb24pID0+IHZvaWQ7XG4gICAgZXZlbnQ6IChyZWN2RXZlbnQ6IFJlY3ZFdmVudCkgPT4gdm9pZDtcbiAgICBldmVudEV4MTogKHJlY3ZFdmVudDogUmVjdkV2ZW50RXgxKSA9PiB2b2lkO1xuICAgIGFpcnBvcnRMaXN0OiAocmVjdkFpcnBvcnRMaXN0OiBSZWN2QWlycG9ydExpc3QpID0+IHZvaWQ7XG4gICAgdm9yTGlzdDogKHJlY3ZWT1JMaXN0OiBSZWN2Vk9STGlzdCkgPT4gdm9pZDtcbiAgICBuZGJMaXN0OiAocmVjdk5EQkxpc3Q6IFJlY3ZOREJMaXN0KSA9PiB2b2lkO1xuICAgIHdheXBvaW50TGlzdDogKHJlY3ZXYXlwb2ludExpc3Q6IFJlY3ZXYXlwb2ludExpc3QpID0+IHZvaWQ7XG4gICAgcmVzZXJ2ZWRLZXk6IChyZWN2UmVzZXJ2ZWRLZXk6IFJlY3ZSZXNlcnZlZEtleSkgPT4gdm9pZDtcbiAgICBjdXN0b21BY3Rpb246IChyZWN2Q3VzdG9tQWN0aW9uOiBSZWN2Q3VzdG9tQWN0aW9uKSA9PiB2b2lkO1xuICAgIGNsaWVudERhdGE6IChyZWN2U2ltT2JqZWN0RGF0YTogUmVjdlNpbU9iamVjdERhdGEpID0+IHZvaWQ7XG4gICAgZXZlbnRXZWF0aGVyTW9kZTogKHJlY3ZXZWF0aGVyTW9kZTogUmVjdkV2ZW50V2VhdGhlck1vZGUpID0+IHZvaWQ7XG4gICAgYXNzaWduZWRPYmplY3RJRDogKHJlY3ZBc3NpZ25lZE9iamVjdElEOiBSZWN2QXNzaWduZWRPYmplY3RJRCkgPT4gdm9pZDtcbiAgICBldmVudEZpbGVuYW1lOiAocmVjdkV2ZW50RmlsZW5hbWU6IFJlY3ZFdmVudEZpbGVuYW1lKSA9PiB2b2lkO1xuICAgIGV2ZW50RnJhbWU6IChyZWN2RXZlbnRGcmFtZTogUmVjdkV2ZW50RnJhbWUpID0+IHZvaWQ7XG4gICAgZXZlbnRBZGRSZW1vdmU6IChyZWN2RXZlbnQ6IFJlY3ZFdmVudEFkZFJlbW92ZSkgPT4gdm9pZDtcbiAgICBzaW1PYmplY3REYXRhOiAocmVjdlNpbU9iamVjdERhdGE6IFJlY3ZTaW1PYmplY3REYXRhKSA9PiB2b2lkO1xuICAgIHNpbU9iamVjdERhdGFCeVR5cGU6IChyZWN2U2ltT2JqZWN0RGF0YTogUmVjdlNpbU9iamVjdERhdGEpID0+IHZvaWQ7XG4gICAgc3lzdGVtU3RhdGU6IChyZWN2U3lzdGVtU3RhdGU6IFJlY3ZTeXN0ZW1TdGF0ZSkgPT4gdm9pZDtcbiAgICB3ZWF0aGVyT2JzZXJ2YXRpb246IChyZWN2V2VhdGhlck9ic2VydmF0aW9uOiBSZWN2V2VhdGhlck9ic2VydmF0aW9uKSA9PiB2b2lkO1xuICAgIGNsb3VkU3RhdGU6IChyZWN2Q2xvdWRTdGF0ZTogUmVjdkNsb3VkU3RhdGUpID0+IHZvaWQ7XG4gICAgZXZlbnRNdWx0aXBsYXllclNlcnZlclN0YXJ0ZWQ6ICgpID0+IHZvaWQ7XG4gICAgZXZlbnRNdWx0aXBsYXllckNsaWVudFN0YXJ0ZWQ6ICgpID0+IHZvaWQ7XG4gICAgZXZlbnRNdWx0aXBsYXllclNlc3Npb25FbmRlZDogKCkgPT4gdm9pZDtcbiAgICBldmVudFJhY2VFbmQ6IChyZWN2RXZlbnRSYWNlRW5kOiBSZWN2RXZlbnRSYWNlRW5kKSA9PiB2b2lkO1xuICAgIGV2ZW50UmFjZUxhcDogKHJlY3ZFdmVudFJhY2VMYXA6IFJlY3ZFdmVudFJhY2VMYXApID0+IHZvaWQ7XG4gICAgZmFjaWxpdHlEYXRhOiAocmVjdkZhY2lsaXR5RGF0YTogUmVjdkZhY2lsaXR5RGF0YSkgPT4gdm9pZDtcbiAgICBmYWNpbGl0eURhdGFFbmQ6IChyZWN2RmFjaWxpdHlEYXRhRW5kOiBSZWN2RmFjaWxpdHlEYXRhRW5kKSA9PiB2b2lkO1xuICAgIGZhY2lsaXR5TWluaW1hbExpc3Q6IChyZWN2RmFjaWxpdHlNaW5pbWFsTGlzdDogUmVjdkZhY2lsaXR5TWluaW1hbExpc3QpID0+IHZvaWQ7XG4gICAgamV0d2F5RGF0YTogKHJlY3ZKZXR3YXlEYXRhOiBSZWN2SmV0d2F5RGF0YSkgPT4gdm9pZDtcbiAgICBhY3Rpb25DYWxsYmFjazogKHJlY3ZBY3Rpb25DYWxsYmFjazogUmVjdkFjdGlvbkNhbGxiYWNrKSA9PiB2b2lkO1xuICAgIGNvbnRyb2xsZXJzTGlzdDogKHJlY3ZDb250cm9sbGVyc0xpc3Q6IFJlY3ZDb250cm9sbGVyc0xpc3QpID0+IHZvaWQ7XG4gICAgaW5wdXRFdmVudHNMaXN0OiAocmVjdkVudW1lcmF0ZUlucHV0RXZlbnRzOiBSZWN2RW51bWVyYXRlSW5wdXRFdmVudHMpID0+IHZvaWQ7XG4gICAgZ2V0SW5wdXRFdmVudDogKHJlY3ZHZXRJbnB1dEV2ZW50OiBSZWN2R2V0SW5wdXRFdmVudCkgPT4gdm9pZDtcbiAgICBzdWJzY3JpYmVJbnB1dEV2ZW50OiAocmVjdlN1YnNjcmliZUlucHV0RXZlbnQ6IFJlY3ZTdWJzY3JpYmVJbnB1dEV2ZW50KSA9PiB2b2lkO1xuICAgIGVudW1lcmF0ZUlucHV0RXZlbnRQYXJhbXM6IChcbiAgICAgICAgcmVjdkVudW1lcmF0ZUlucHV0RXZlbnRQYXJhbXM6IFJlY3ZFbnVtZXJhdGVJbnB1dEV2ZW50UGFyYW1zXG4gICAgKSA9PiB2b2lkO1xufVxuXG50eXBlIENvbm5lY3Rpb25PcHRpb25zID1cbiAgICB8IHsgaG9zdDogc3RyaW5nOyBwb3J0OiBudW1iZXIgfVxuICAgIHwgeyBzaW1Db25uZWN0Q2ZnSW5kZXg6IG51bWJlciB9XG4gICAgfCB7IHJlbW90ZTogeyBob3N0OiBzdHJpbmc7IHBvcnQ6IG51bWJlciB9IH07XG5cbmVudW0gU2ltQ29ubmVjdEVycm9yIHtcbiAgICBVbmtub3duSG9zdCA9ICdVbmtub3duIGhvc3QnLFxuICAgIEd1aWRJbnZhbGlkU2l6ZSA9ICdHVUlEIGlzIG5vdCAxNiBieXRlcyBsb25nJyxcbiAgICBVbmltcGxlbWVudGVkID0gJ05vdCB5ZXQgaW1wbGVtZW50ZWQnLFxuICAgIFZlcnNpb25NaXNtYXRjaCA9ICdJbnZhbGlkIHZlcnNpb24yJyxcbiAgICBQYWNrZXRUb29MYXJnZSA9ICdQYWNrZXQgdG9vIGxhcmdlJyxcbiAgICBJbnZhbGlkUmVhZCA9ICdJbnZhbGlkIHJlYWQnLFxuICAgIEludmFsaWRQcm90b2NvbCA9ICdJbnZhbGlkIHByb3RvY29sIHZlcnNpb24nLFxuICAgIEJhZFZlcnNpb24gPSAnVW5zdXBwb3J0ZWQgcHJvdG9jb2wgdmVyc2lvbicsXG59XG5cbmNsYXNzIFNpbUNvbm5lY3RDb25uZWN0aW9uIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9hcHBOYW1lOiBzdHJpbmc7XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IF9vdXJQcm90b2NvbDogUHJvdG9jb2w7XG5cbiAgICBfY2xpZW50U29ja2V0OiBTaW1Db25uZWN0U29ja2V0O1xuXG4gICAgcHJpdmF0ZSBfb3BlblRpbWVvdXQ6IG51bGwgfCBUaW1lb3V0O1xuXG4gICAgcHJpdmF0ZSBfcGFja2V0c1NlbnQ6IG51bWJlcjtcblxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3BhY2tldERhdGFCdWZmZXIgPSBuZXcgUmF3QnVmZmVyKDI1Nik7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHBOYW1lOiBzdHJpbmcsIHByb3RvY29sVmVyc2lvbjogUHJvdG9jb2wpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fYXBwTmFtZSA9IGFwcE5hbWU7XG4gICAgICAgIHRoaXMuX3BhY2tldHNTZW50ID0gMDtcbiAgICAgICAgdGhpcy5fb3VyUHJvdG9jb2wgPSBwcm90b2NvbFZlcnNpb247XG5cbiAgICAgICAgdGhpcy5fb3BlblRpbWVvdXQgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX2NsaWVudFNvY2tldCA9IG5ldyBTaW1Db25uZWN0U29ja2V0KCk7XG5cbiAgICAgICAgdGhpcy5fY2xpZW50U29ja2V0Lm9uKCdjb25uZWN0JywgdGhpcy5fb3Blbi5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5fY2xpZW50U29ja2V0Lm9uKCdkYXRhJywgdGhpcy5faGFuZGxlTWVzc2FnZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5fY2xpZW50U29ja2V0Lm9uKCdjbG9zZScsICgpID0+IHRoaXMuZW1pdCgnY2xvc2UnKSk7XG4gICAgICAgIHRoaXMuX2NsaWVudFNvY2tldC5vbignZXJyb3InLCAoY29ubmVjdEVycm9yOiBFcnJvcikgPT4gdGhpcy5lbWl0KCdlcnJvcicsIGNvbm5lY3RFcnJvcikpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvbjxVIGV4dGVuZHMga2V5b2YgU2ltQ29ubmVjdFJlY3ZFdmVudHM+KFxuICAgICAgICBldmVudDogVSxcbiAgICAgICAgbGlzdGVuZXI6IFNpbUNvbm5lY3RSZWN2RXZlbnRzW1VdXG4gICAgKTogdGhpcyB7XG4gICAgICAgIHJldHVybiBzdXBlci5vbihldmVudCwgbGlzdGVuZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvbmNlPFUgZXh0ZW5kcyBrZXlvZiBTaW1Db25uZWN0UmVjdkV2ZW50cz4oXG4gICAgICAgIGV2ZW50OiBVLFxuICAgICAgICBsaXN0ZW5lcjogU2ltQ29ubmVjdFJlY3ZFdmVudHNbVV1cbiAgICApOiB0aGlzIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLm9uY2UoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlTGlzdGVuZXI8VSBleHRlbmRzIGtleW9mIFNpbUNvbm5lY3RSZWN2RXZlbnRzPihcbiAgICAgICAgZXZlbnQ6IFUsXG4gICAgICAgIGxpc3RlbmVyOiBTaW1Db25uZWN0UmVjdkV2ZW50c1tVXVxuICAgICk6IHRoaXMge1xuICAgICAgICByZXR1cm4gc3VwZXIucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlQWxsTGlzdGVuZXJzPFUgZXh0ZW5kcyBrZXlvZiBTaW1Db25uZWN0UmVjdkV2ZW50cz4oZXZlbnQ6IFUpOiB0aGlzIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLnJlbW92ZUFsbExpc3RlbmVycyhldmVudCk7XG4gICAgfVxuXG4gICAgcHVibGljIG9mZiA9IHRoaXMucmVtb3ZlTGlzdGVuZXI7XG5cbiAgICBwdWJsaWMgYWRkTGlzdGVuZXIgPSB0aGlzLm9uO1xuXG4gICAgcHVibGljIGVtaXQ8VSBleHRlbmRzIGtleW9mIFNpbUNvbm5lY3RSZWN2RXZlbnRzPihcbiAgICAgICAgZXZlbnQ6IFUsXG4gICAgICAgIC4uLmFyZ3M6IFBhcmFtZXRlcnM8U2ltQ29ubmVjdFJlY3ZFdmVudHNbVV0+XG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBzdXBlci5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgICB9XG5cbiAgICBjb25uZWN0KG9wdGlvbnM/OiBDb25uZWN0aW9uT3B0aW9ucyk6IHZvaWQge1xuICAgICAgICBpZiAob3B0aW9ucyAmJiAnaG9zdCcgaW4gb3B0aW9ucyAmJiAncG9ydCcgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5fY2xpZW50U29ja2V0LmNvbm5lY3QoeyB0eXBlOiAnaXB2NCcsIC4uLm9wdGlvbnMgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucyAmJiAncmVtb3RlJyBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICAvLyBGb3IgYmFja3dhcmRzLWNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgIHRoaXMuX2NsaWVudFNvY2tldC5jb25uZWN0KHsgdHlwZTogJ2lwdjQnLCAuLi5vcHRpb25zLnJlbW90ZSB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF1dG9kZXRlY3RTZXJ2ZXJBZGRyZXNzKG9wdGlvbnM/LnNpbUNvbm5lY3RDZmdJbmRleCkudGhlbihcbiAgICAgICAgICAgICAgICAoYWRkcmVzczogQ29ubmVjdGlvblBhcmFtZXRlcnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2xpZW50U29ja2V0LmNvbm5lY3QoYWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIHJlcXVlc3RSZXNwb25zZVRpbWVzKG5Db3VudDogbnVtYmVyKSB7XG4gICAgICAgIC8vIFRPRE86IGltcGxlbWVudCBzaW1jb25uZWN0IGZ1bmN0aW9uXG4gICAgICAgIC8vIHRoaXMgb25lIG5lZWRzIHNwZWNpYWwgY2FyZTogaXQgc2VuZCBhIHBhY2tldCAoaWQgMHgwMywgb25lIHBhcmFtIDogbkNvdW50KVxuICAgICAgICAvLyBhbmQgcmVjZWl2ZSA4IGZsb2F0IGRhdGEgKHdpdGggcmVzcG9uc2UgaWQgMHgwMDAxMDAwMSkgLiBTb21lIGNhbGN1bGF0aW9uc1xuICAgICAgICAvLyBoYXMgdG8gYmUgZG9uZVxuICAgICAgICB0aHJvdyBFcnJvcihTaW1Db25uZWN0RXJyb3IuVW5pbXBsZW1lbnRlZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIG1hcENsaWVudEV2ZW50VG9TaW1FdmVudChjbGllbnRFdmVudElkOiBDbGllbnRFdmVudElkLCBldmVudE5hbWU/OiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgwNClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoY2xpZW50RXZlbnRJZClcbiAgICAgICAgICAgICAgICAucHV0U3RyaW5nMjU2KGV2ZW50TmFtZSB8fCAnJylcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgdHJhbnNtaXRDbGllbnRFdmVudChcbiAgICAgICAgb2JqZWN0SWQ6IE9iamVjdElkLFxuICAgICAgICBjbGllbnRFdmVudElkOiBDbGllbnRFdmVudElkLFxuICAgICAgICBkYXRhOiBudW1iZXIsXG4gICAgICAgIG5vdGlmaWNhdGlvbkdyb3VwSWQ6IE5vdGlmaWNhdGlvbkdyb3VwSWQsXG4gICAgICAgIGZsYWdzOiBFdmVudEZsYWdcbiAgICApOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgwNSlcbiAgICAgICAgICAgICAgICAucHV0SW50MzIob2JqZWN0SWQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGNsaWVudEV2ZW50SWQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGRhdGEpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKG5vdGlmaWNhdGlvbkdyb3VwSWQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGZsYWdzKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBzZXRTeXN0ZW1FdmVudFN0YXRlKGNsaWVudEV2ZW50SWQ6IENsaWVudEV2ZW50SWQsIHN0YXRlOiBib29sZWFuKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4MDYpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGNsaWVudEV2ZW50SWQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKHN0YXRlID8gMSA6IDApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGFkZENsaWVudEV2ZW50VG9Ob3RpZmljYXRpb25Hcm91cChcbiAgICAgICAgbm90aWZpY2F0aW9uR3JvdXBJZDogTm90aWZpY2F0aW9uR3JvdXBJZCxcbiAgICAgICAgY2xpZW50RXZlbnRJZDogQ2xpZW50RXZlbnRJZCxcbiAgICAgICAgbWFza2FibGU6IGJvb2xlYW5cbiAgICApOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgwNylcbiAgICAgICAgICAgICAgICAucHV0SW50MzIobm90aWZpY2F0aW9uR3JvdXBJZClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoY2xpZW50RXZlbnRJZClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIobWFza2FibGUgPyAxIDogMClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgcmVtb3ZlQ2xpZW50RXZlbnQoXG4gICAgICAgIG5vdGlmaWNhdGlvbkdyb3VwSWQ6IE5vdGlmaWNhdGlvbkdyb3VwSWQsXG4gICAgICAgIGNsaWVudEV2ZW50SWQ6IENsaWVudEV2ZW50SWRcbiAgICApOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgwOCkgLy9cbiAgICAgICAgICAgICAgICAucHV0SW50MzIobm90aWZpY2F0aW9uR3JvdXBJZClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoY2xpZW50RXZlbnRJZClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgc2V0Tm90aWZpY2F0aW9uR3JvdXBQcmlvcml0eShcbiAgICAgICAgbm90aWZpY2F0aW9uR3JvdXBJZDogTm90aWZpY2F0aW9uR3JvdXBJZCxcbiAgICAgICAgcHJpb3JpdHk6IE5vdGlmaWNhdGlvblByaW9yaXR5XG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4MDkpIC8vXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKG5vdGlmaWNhdGlvbkdyb3VwSWQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKHByaW9yaXR5KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBjbGVhck5vdGlmaWNhdGlvbkdyb3VwKG5vdGlmaWNhdGlvbkdyb3VwSWQ6IE5vdGlmaWNhdGlvbkdyb3VwSWQpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgwYSkgLy9cbiAgICAgICAgICAgICAgICAucHV0SW50MzIobm90aWZpY2F0aW9uR3JvdXBJZClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgcmVxdWVzdE5vdGlmaWNhdGlvbkdyb3VwKFxuICAgICAgICBub3RpZmljYXRpb25Hcm91cElkOiBOb3RpZmljYXRpb25Hcm91cElkLFxuICAgICAgICByZXNlcnZlZDogbnVtYmVyLFxuICAgICAgICBmbGFnczogbnVtYmVyXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4MGIpIC8vXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKG5vdGlmaWNhdGlvbkdyb3VwSWQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKHJlc2VydmVkKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihmbGFncylcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgYWRkVG9EYXRhRGVmaW5pdGlvbihcbiAgICAgICAgZGF0YURlZmluaXRpb25JZDogRGF0YURlZmluaXRpb25JZCxcbiAgICAgICAgZGF0dW1OYW1lOiBzdHJpbmcsXG4gICAgICAgIHVuaXRzTmFtZTogc3RyaW5nIHwgbnVsbCxcbiAgICAgICAgZGF0YVR5cGU/OiBTaW1Db25uZWN0RGF0YVR5cGUsXG4gICAgICAgIGVwc2lsb24/OiBudW1iZXIsXG4gICAgICAgIGRhdHVtSWQ/OiBudW1iZXJcbiAgICApOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgwYylcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoZGF0YURlZmluaXRpb25JZClcbiAgICAgICAgICAgICAgICAucHV0U3RyaW5nMjU2KGRhdHVtTmFtZSlcbiAgICAgICAgICAgICAgICAucHV0U3RyaW5nMjU2KHVuaXRzTmFtZSlcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoZGF0YVR5cGUgPT09IHVuZGVmaW5lZCA/IFNpbUNvbm5lY3REYXRhVHlwZS5GTE9BVDY0IDogZGF0YVR5cGUpXG4gICAgICAgICAgICAgICAgLnB1dEZsb2F0MzIoZXBzaWxvbiB8fCAwKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihkYXR1bUlkID09PSB1bmRlZmluZWQgPyBTaW1Db25uZWN0Q29uc3RhbnRzLlVOVVNFRCA6IGRhdHVtSWQpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGNsZWFyRGF0YURlZmluaXRpb24oZGF0YURlZmluaXRpb25JZDogRGF0YURlZmluaXRpb25JZCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDBkKSAvL1xuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihkYXRhRGVmaW5pdGlvbklkKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogTGlzdGVuIGZvciB7QGxpbmsgU2ltQ29ubmVjdFJlY3ZFdmVudHMuc2ltT2JqZWN0RGF0YX0gdG8gZ2V0IHRoZSBkYXRhLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0c1xuICAgICAqIGNvbnN0IExJVkVfREFUQV9SRVFfSUQgPSAxMjM0O1xuICAgICAqXG4gICAgICogaGFuZGxlLmFkZFRvRGF0YURlZmluaXRpb24oXG4gICAgICogICBMSVZFX0RBVEFfUkVRX0lELFxuICAgICAqICAgJ1NUUlVDVCBMQVRMT05BTFQnLFxuICAgICAqICAgbnVsbCxcbiAgICAgKiAgIFNpbUNvbm5lY3REYXRhVHlwZS5MQVRMT05BTFRcbiAgICAgKiApO1xuICAgICAqXG4gICAgICogaGFuZGxlLm9uKCdzaW1PYmplY3REYXRhJywgcmVjdlNpbU9iamVjdERhdGEgPT4ge1xuICAgICAqICAgaWYgKHJlY3ZTaW1PYmplY3REYXRhLnJlcXVlc3RJRCA9PT0gTElWRV9EQVRBX1JFUV9JRCkge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhyZWFkTGF0TG9uQWx0KHJlY3ZTaW1PYmplY3REYXRhLmRhdGEpKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICByZXF1ZXN0RGF0YU9uU2ltT2JqZWN0KFxuICAgICAgICBkYXRhUmVxdWVzdElkOiBEYXRhUmVxdWVzdElkLFxuICAgICAgICBkYXRhRGVmaW5pdGlvbklkOiBEYXRhRGVmaW5pdGlvbklkLFxuICAgICAgICBvYmplY3RJZDogT2JqZWN0SWQsXG4gICAgICAgIHBlcmlvZDogU2ltQ29ubmVjdFBlcmlvZCxcbiAgICAgICAgZmxhZ3M/OiBEYXRhUmVxdWVzdEZsYWcsXG4gICAgICAgIG9yaWdpbj86IG51bWJlcixcbiAgICAgICAgaW50ZXJ2YWw/OiBudW1iZXIsXG4gICAgICAgIGxpbWl0PzogbnVtYmVyXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4MGUpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGRhdGFSZXF1ZXN0SWQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGRhdGFEZWZpbml0aW9uSWQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKG9iamVjdElkKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihwZXJpb2QpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGZsYWdzIHx8IDApXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKG9yaWdpbiB8fCAwKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihpbnRlcnZhbCB8fCAwKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihsaW1pdCB8fCAwKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogTGlzdGVuIGZvciB7QGxpbmsgU2ltQ29ubmVjdFJlY3ZFdmVudHMuc2ltT2JqZWN0RGF0YUJ5VHlwZX0gdG8gZ2V0IHRoZSBkYXRhLlxuICAgICAqXG4gICAgICovXG4gICAgcmVxdWVzdERhdGFPblNpbU9iamVjdFR5cGUoXG4gICAgICAgIGRhdGFSZXF1ZXN0SWQ6IERhdGFSZXF1ZXN0SWQsXG4gICAgICAgIGRhdGFEZWZpbml0aW9uSWQ6IERhdGFEZWZpbml0aW9uSWQsXG4gICAgICAgIHJhZGl1c01ldGVyczogbnVtYmVyLFxuICAgICAgICB0eXBlOiBTaW1PYmplY3RUeXBlXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4MGYpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGRhdGFSZXF1ZXN0SWQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGRhdGFEZWZpbml0aW9uSWQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKHJhZGl1c01ldGVycylcbiAgICAgICAgICAgICAgICAucHV0SW50MzIodHlwZSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgc2V0RGF0YU9uU2ltT2JqZWN0KFxuICAgICAgICBkYXRhRGVmaW5pdGlvbklkOiBEYXRhRGVmaW5pdGlvbklkLFxuICAgICAgICBvYmplY3RJZDogT2JqZWN0SWQsXG4gICAgICAgIGRhdGE6IHsgYnVmZmVyOiBSYXdCdWZmZXI7IGFycmF5Q291bnQ6IG51bWJlcjsgdGFnZ2VkOiBib29sZWFuIH0gfCBTaW1Db25uZWN0RGF0YVtdXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgcGFja2V0ID0gdGhpcy5fYmVnaW5QYWNrZXQoMHgxMCkgLy9cbiAgICAgICAgICAgIC5wdXRJbnQzMihkYXRhRGVmaW5pdGlvbklkKVxuICAgICAgICAgICAgLnB1dEludDMyKG9iamVjdElkKTtcblxuICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICBwYWNrZXRcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoRGF0YVNldEZsYWcuREVGQVVMVCkgLy9cbiAgICAgICAgICAgICAgICAucHV0SW50MzIoZGF0YS5sZW5ndGgpIC8vXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKDApOyAvLyBKdXN0IGEgcGxhY2Vob2xkZXIgZm9yIGFycmF5IHVuaXQgc2l6ZVxuXG4gICAgICAgICAgICBjb25zdCBhcnJheVN0YXJ0UG9zID0gcGFja2V0LmdldFJhd0J1ZmZlcigpLmdldE9mZnNldCgpO1xuXG4gICAgICAgICAgICBkYXRhLmZvckVhY2goc2ltQ29ubmVjdERhdGEgPT4ge1xuICAgICAgICAgICAgICAgIHNpbUNvbm5lY3REYXRhLndyaXRlVG8ocGFja2V0KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBhcnJheVRvdGFsU2l6ZSA9IHBhY2tldC5nZXRSYXdCdWZmZXIoKS5nZXRPZmZzZXQoKSAtIGFycmF5U3RhcnRQb3M7XG4gICAgICAgICAgICBjb25zdCB1bml0U2l6ZSA9IGFycmF5VG90YWxTaXplIC8gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICBwYWNrZXQucHV0SW50MzIodW5pdFNpemUsIGFycmF5U3RhcnRQb3MgLSA0KTsgLy8gUmVwbGFjZSBwbGFjZWhvbGRlclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgeyB0YWdnZWQsIGFycmF5Q291bnQsIGJ1ZmZlciB9ID0gZGF0YTtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzID0gYnVmZmVyLmdldEJ1ZmZlcigpO1xuICAgICAgICAgICAgcGFja2V0XG4gICAgICAgICAgICAgICAgLnB1dEludDMyKHRhZ2dlZCA/IERhdGFTZXRGbGFnLlRBR0dFRCA6IERhdGFTZXRGbGFnLkRFRkFVTFQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGFycmF5Q291bnQgPT09IDAgPyAxIDogYXJyYXlDb3VudClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoYnl0ZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIC5wdXRCeXRlcyhieXRlcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKHBhY2tldCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgdXNlIG1hcElucHV0RXZlbnRUb0NsaWVudEV2ZW50RXgxIGluc3RlYWRcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIG1hcElucHV0RXZlbnRUb0NsaWVudEV2ZW50KFxuICAgICAgICBpbnB1dEdyb3VwSWQ6IElucHV0R3JvdXBJZCxcbiAgICAgICAgaW5wdXREZWZpbml0aW9uOiBzdHJpbmcsXG4gICAgICAgIGNsaWVudEV2ZW50RG93bklEOiBDbGllbnRFdmVudElkLFxuICAgICAgICBkb3duVmFsdWU/OiBudW1iZXIsXG4gICAgICAgIGNsaWVudEV2ZW50VXBJRD86IENsaWVudEV2ZW50SWQsXG4gICAgICAgIHVwVmFsdWU/OiBudW1iZXIsXG4gICAgICAgIG1hc2thYmxlPzogYm9vbGVhblxuICAgICk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDExKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihpbnB1dEdyb3VwSWQpXG4gICAgICAgICAgICAgICAgLnB1dFN0cmluZzI1NihpbnB1dERlZmluaXRpb24pXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGNsaWVudEV2ZW50RG93bklEKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihkb3duVmFsdWUgfHwgMClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudEV2ZW50VXBJRCA9PT0gdW5kZWZpbmVkID8gU2ltQ29ubmVjdENvbnN0YW50cy5VTlVTRUQgOiBjbGllbnRFdmVudFVwSURcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKHVwVmFsdWUgfHwgMClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIobWFza2FibGUgPyAxIDogMClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgc2V0SW5wdXRHcm91cFByaW9yaXR5KGlucHV0R3JvdXBJZDogSW5wdXRHcm91cElkLCBwcmlvcml0eTogTm90aWZpY2F0aW9uUHJpb3JpdHkpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgxMikgLy9cbiAgICAgICAgICAgICAgICAucHV0SW50MzIoaW5wdXRHcm91cElkKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihwcmlvcml0eSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgcmVtb3ZlSW5wdXRFdmVudChpbnB1dEdyb3VwSWQ6IElucHV0R3JvdXBJZCwgaW5wdXREZWZpbml0aW9uOiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgxMykgLy9cbiAgICAgICAgICAgICAgICAucHV0SW50MzIoaW5wdXRHcm91cElkKVxuICAgICAgICAgICAgICAgIC5wdXRTdHJpbmcyNTYoaW5wdXREZWZpbml0aW9uKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBjbGVhcklucHV0R3JvdXAoaW5wdXRHcm91cElkOiBJbnB1dEdyb3VwSWQpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgxNCkgLy9cbiAgICAgICAgICAgICAgICAucHV0SW50MzIoaW5wdXRHcm91cElkKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBzZXRJbnB1dEdyb3VwU3RhdGUoaW5wdXRHcm91cElkOiBJbnB1dEdyb3VwSWQsIHN0YXRlOiBib29sZWFuKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4MTUpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGlucHV0R3JvdXBJZClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoc3RhdGUgPyAxIDogMClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgcmVxdWVzdFJlc2VydmVkS2V5KFxuICAgICAgICBjbGllbnRFdmVudElkOiBDbGllbnRFdmVudElkLFxuICAgICAgICBrZXlDaG9pY2UxPzogc3RyaW5nLFxuICAgICAgICBrZXlDaG9pY2UyPzogc3RyaW5nLFxuICAgICAgICBrZXlDaG9pY2UzPzogc3RyaW5nXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4MTYpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGNsaWVudEV2ZW50SWQpXG4gICAgICAgICAgICAgICAgLnB1dFN0cmluZyhrZXlDaG9pY2UxIHx8ICcnLCAzMClcbiAgICAgICAgICAgICAgICAucHV0U3RyaW5nKGtleUNob2ljZTIgfHwgJycsIDMwKVxuICAgICAgICAgICAgICAgIC5wdXRTdHJpbmcoa2V5Q2hvaWNlMyB8fCAnJywgMzApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHN1YnNjcmliZVRvU3lzdGVtRXZlbnQoY2xpZW50RXZlbnRJZDogQ2xpZW50RXZlbnRJZCwgZXZlbnROYW1lOiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgxNykgLy9cbiAgICAgICAgICAgICAgICAucHV0SW50MzIoY2xpZW50RXZlbnRJZClcbiAgICAgICAgICAgICAgICAucHV0U3RyaW5nMjU2KGV2ZW50TmFtZSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgdW5zdWJzY3JpYmVGcm9tU3lzdGVtRXZlbnQoY2xpZW50RXZlbnRJZDogQ2xpZW50RXZlbnRJZCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDE4KSAvL1xuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihjbGllbnRFdmVudElkKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIE1TRlMgKEtpdHR5SGF3aylcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHdlYXRoZXJSZXF1ZXN0SW50ZXJwb2xhdGVkT2JzZXJ2YXRpb24oXG4gICAgICAgIGRhdGFSZXF1ZXN0SWQ6IERhdGFSZXF1ZXN0SWQsXG4gICAgICAgIGxhdDogbnVtYmVyLFxuICAgICAgICBsb246IG51bWJlcixcbiAgICAgICAgYWx0OiBudW1iZXJcbiAgICApOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgxOSlcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoZGF0YVJlcXVlc3RJZClcbiAgICAgICAgICAgICAgICAucHV0RmxvYXQzMihsYXQpXG4gICAgICAgICAgICAgICAgLnB1dEZsb2F0MzIobG9uKVxuICAgICAgICAgICAgICAgIC5wdXRGbG9hdDMyKGFsdClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSBNU0ZTIChLaXR0eUhhd2spXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICB3ZWF0aGVyUmVxdWVzdE9ic2VydmF0aW9uQXRTdGF0aW9uKGRhdGFSZXF1ZXN0SWQ6IERhdGFSZXF1ZXN0SWQsIElDQU86IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDFhKSAvL1xuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihkYXRhUmVxdWVzdElkKVxuICAgICAgICAgICAgICAgIC5wdXRTdHJpbmcoSUNBTywgNSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSBNU0ZTIChLaXR0eUhhd2spXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICB3ZWF0aGVyUmVxdWVzdE9ic2VydmF0aW9uQXROZWFyZXN0U3RhdGlvbihcbiAgICAgICAgZGF0YVJlcXVlc3RJZDogRGF0YVJlcXVlc3RJZCxcbiAgICAgICAgbGF0OiBudW1iZXIsXG4gICAgICAgIGxvbjogbnVtYmVyXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4MWIpIC8vXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGRhdGFSZXF1ZXN0SWQpXG4gICAgICAgICAgICAgICAgLnB1dEZsb2F0MzIobGF0KVxuICAgICAgICAgICAgICAgIC5wdXRGbG9hdDMyKGxvbilcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSBNU0ZTIChLaXR0eUhhd2spXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICB3ZWF0aGVyQ3JlYXRlU3RhdGlvbihcbiAgICAgICAgZGF0YVJlcXVlc3RJZDogRGF0YVJlcXVlc3RJZCxcbiAgICAgICAgSUNBTzogc3RyaW5nLFxuICAgICAgICBuYW1lOiBzdHJpbmcsXG4gICAgICAgIGxhdDogbnVtYmVyLFxuICAgICAgICBsb246IG51bWJlcixcbiAgICAgICAgYWx0OiBudW1iZXJcbiAgICApOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgxYylcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoZGF0YVJlcXVlc3RJZClcbiAgICAgICAgICAgICAgICAucHV0U3RyaW5nKElDQU8sIDUpXG4gICAgICAgICAgICAgICAgLnB1dFN0cmluZzI1NihuYW1lKVxuICAgICAgICAgICAgICAgIC5wdXRGbG9hdDMyKGxhdClcbiAgICAgICAgICAgICAgICAucHV0RmxvYXQzMihsb24pXG4gICAgICAgICAgICAgICAgLnB1dEZsb2F0MzIoYWx0KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIE1TRlMgKEtpdHR5SGF3aylcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHdlYXRoZXJSZW1vdmVTdGF0aW9uKGRhdGFSZXF1ZXN0SWQ6IERhdGFSZXF1ZXN0SWQsIElDQU86IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDFkKSAvL1xuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihkYXRhUmVxdWVzdElkKVxuICAgICAgICAgICAgICAgIC5wdXRTdHJpbmcoSUNBTywgNSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSBNU0ZTIChLaXR0eUhhd2spXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICB3ZWF0aGVyU2V0T2JzZXJ2YXRpb24oc2Vjb25kczogbnVtYmVyLCBtZXRhcjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4MWUpIC8vXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKHNlY29uZHMpXG4gICAgICAgICAgICAgICAgLnB1dFN0cmluZyhtZXRhcilcbiAgICAgICAgICAgICAgICAucHV0Qnl0ZSgwKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIE1TRlMgKEtpdHR5SGF3aylcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHdlYXRoZXJTZXRNb2RlU2VydmVyKHBvcnQ6IG51bWJlciwgc2Vjb25kczogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4MWYpIC8vXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKHBvcnQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKHNlY29uZHMpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgTVNGUyAoS2l0dHlIYXdrKVxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgd2VhdGhlclNldE1vZGVUaGVtZSh0aGVtZU5hbWU6IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDIwKSAvL1xuICAgICAgICAgICAgICAgIC5wdXRTdHJpbmcyNTYodGhlbWVOYW1lKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIE1TRlMgKEtpdHR5SGF3aylcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHdlYXRoZXJTZXRNb2RlR2xvYmFsKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQodGhpcy5fYmVnaW5QYWNrZXQoMHgyMSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIE1TRlMgKEtpdHR5SGF3aylcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHdlYXRoZXJTZXRNb2RlQ3VzdG9tKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQodGhpcy5fYmVnaW5QYWNrZXQoMHgyMikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIE1TRlMgKEtpdHR5SGF3aylcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHdlYXRoZXJTZXREeW5hbWljVXBkYXRlUmF0ZShyYXRlOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgyMykgLy9cbiAgICAgICAgICAgICAgICAucHV0SW50MzIocmF0ZSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSBNU0ZTIChLaXR0eUhhd2spXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICB3ZWF0aGVyUmVxdWVzdENsb3VkU3RhdGUoXG4gICAgICAgIGRhdGFSZXF1ZXN0SWQ6IERhdGFSZXF1ZXN0SWQsXG4gICAgICAgIG1pbkxhdDogbnVtYmVyLFxuICAgICAgICBtaW5Mb246IG51bWJlcixcbiAgICAgICAgbWluQWx0OiBudW1iZXIsXG4gICAgICAgIG1heExhdDogbnVtYmVyLFxuICAgICAgICBtYXhMb246IG51bWJlcixcbiAgICAgICAgbWF4QWx0OiBudW1iZXIsXG4gICAgICAgIGZsYWdzPzogbnVtYmVyXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4MjQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGRhdGFSZXF1ZXN0SWQpXG4gICAgICAgICAgICAgICAgLnB1dEZsb2F0MzIobWluTGF0KVxuICAgICAgICAgICAgICAgIC5wdXRGbG9hdDMyKG1pbkxvbilcbiAgICAgICAgICAgICAgICAucHV0RmxvYXQzMihtaW5BbHQpXG4gICAgICAgICAgICAgICAgLnB1dEZsb2F0MzIobWF4TGF0KVxuICAgICAgICAgICAgICAgIC5wdXRGbG9hdDMyKG1heExvbilcbiAgICAgICAgICAgICAgICAucHV0RmxvYXQzMihtYXhBbHQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGZsYWdzIHx8IDApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgTVNGUyAoS2l0dHlIYXdrKVxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgd2VhdGhlckNyZWF0ZVRoZXJtYWwoXG4gICAgICAgIGRhdGFSZXF1ZXN0SWQ6IERhdGFSZXF1ZXN0SWQsXG4gICAgICAgIGxhdDogbnVtYmVyLFxuICAgICAgICBsb246IG51bWJlcixcbiAgICAgICAgYWx0OiBudW1iZXIsXG4gICAgICAgIHJhZGl1czogbnVtYmVyLFxuICAgICAgICBoZWlnaHQ6IG51bWJlcixcbiAgICAgICAgY29yZVJhdGU6IG51bWJlcixcbiAgICAgICAgY29yZVR1cmJ1bGVuY2U6IG51bWJlcixcbiAgICAgICAgc2lua1JhdGU6IG51bWJlcixcbiAgICAgICAgc2lua1R1cmJ1bGVuY2U6IG51bWJlcixcbiAgICAgICAgY29yZVNpemU6IG51bWJlcixcbiAgICAgICAgY29yZVRyYW5zaXRpb25TaXplOiBudW1iZXIsXG4gICAgICAgIHNpbmtMYXllclNpemU6IG51bWJlcixcbiAgICAgICAgc2lua1RyYW5zaXRpb25TaXplOiBudW1iZXJcbiAgICApOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgyNSlcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoZGF0YVJlcXVlc3RJZClcbiAgICAgICAgICAgICAgICAucHV0RmxvYXQzMihsYXQpXG4gICAgICAgICAgICAgICAgLnB1dEZsb2F0MzIobG9uKVxuICAgICAgICAgICAgICAgIC5wdXRGbG9hdDMyKGFsdClcbiAgICAgICAgICAgICAgICAucHV0RmxvYXQzMihyYWRpdXMpXG4gICAgICAgICAgICAgICAgLnB1dEZsb2F0MzIoaGVpZ2h0KVxuICAgICAgICAgICAgICAgIC5wdXRGbG9hdDMyKGNvcmVSYXRlKVxuICAgICAgICAgICAgICAgIC5wdXRGbG9hdDMyKGNvcmVUdXJidWxlbmNlKVxuICAgICAgICAgICAgICAgIC5wdXRGbG9hdDMyKHNpbmtSYXRlKVxuICAgICAgICAgICAgICAgIC5wdXRGbG9hdDMyKHNpbmtUdXJidWxlbmNlKVxuICAgICAgICAgICAgICAgIC5wdXRGbG9hdDMyKGNvcmVTaXplKVxuICAgICAgICAgICAgICAgIC5wdXRGbG9hdDMyKGNvcmVUcmFuc2l0aW9uU2l6ZSlcbiAgICAgICAgICAgICAgICAucHV0RmxvYXQzMihzaW5rTGF5ZXJTaXplKVxuICAgICAgICAgICAgICAgIC5wdXRGbG9hdDMyKHNpbmtUcmFuc2l0aW9uU2l6ZSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSBNU0ZTIChLaXR0eUhhd2spXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICB3ZWF0aGVyUmVtb3ZlVGhlcm1hbChvYmplY3RJZDogT2JqZWN0SWQpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgyNikgLy9cbiAgICAgICAgICAgICAgICAucHV0SW50MzIob2JqZWN0SWQpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGFJQ3JlYXRlUGFya2VkQVRDQWlyY3JhZnQoXG4gICAgICAgIGNvbnRhaW5lclRpdGxlOiBzdHJpbmcsXG4gICAgICAgIHRhaWxOdW1iZXI6IHN0cmluZyxcbiAgICAgICAgYWlycG9ydElEOiBzdHJpbmcsXG4gICAgICAgIGRhdGFSZXF1ZXN0SWQ6IERhdGFSZXF1ZXN0SWRcbiAgICApOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgyNylcbiAgICAgICAgICAgICAgICAucHV0U3RyaW5nMjU2KGNvbnRhaW5lclRpdGxlKVxuICAgICAgICAgICAgICAgIC5wdXRTdHJpbmcodGFpbE51bWJlciwgMTIpXG4gICAgICAgICAgICAgICAgLnB1dFN0cmluZyhhaXJwb3J0SUQsIDUpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGRhdGFSZXF1ZXN0SWQpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGFJQ3JlYXRlRW5yb3V0ZUFUQ0FpcmNyYWZ0KFxuICAgICAgICBjb250YWluZXJUaXRsZTogc3RyaW5nLFxuICAgICAgICB0YWlsTnVtYmVyOiBzdHJpbmcsXG4gICAgICAgIGZsaWdodE51bWJlcjogbnVtYmVyLFxuICAgICAgICBmbGlnaHRQbGFuUGF0aDogc3RyaW5nLFxuICAgICAgICBmbGlnaHRQbGFuUG9zaXRpb246IG51bWJlcixcbiAgICAgICAgdG91Y2hBbmRHbzogYm9vbGVhbixcbiAgICAgICAgZGF0YVJlcXVlc3RJZDogRGF0YVJlcXVlc3RJZFxuICAgICk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDI4KVxuICAgICAgICAgICAgICAgIC5wdXRTdHJpbmcyNTYoY29udGFpbmVyVGl0bGUpXG4gICAgICAgICAgICAgICAgLnB1dFN0cmluZyh0YWlsTnVtYmVyLCAxMilcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoZmxpZ2h0TnVtYmVyKVxuICAgICAgICAgICAgICAgIC5wdXRTdHJpbmcoZmxpZ2h0UGxhblBhdGgsIDI2MClcbiAgICAgICAgICAgICAgICAucHV0RmxvYXQ2NChmbGlnaHRQbGFuUG9zaXRpb24pXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKHRvdWNoQW5kR28gPyAxIDogMClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoZGF0YVJlcXVlc3RJZClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgYUlDcmVhdGVOb25BVENBaXJjcmFmdChcbiAgICAgICAgY29udGFpbmVyVGl0bGU6IHN0cmluZyxcbiAgICAgICAgdGFpbE51bWJlcjogc3RyaW5nLFxuICAgICAgICBpbml0UG9zOiBJbml0UG9zaXRpb24sXG4gICAgICAgIGRhdGFSZXF1ZXN0SWQ6IERhdGFSZXF1ZXN0SWRcbiAgICApOiBudW1iZXIge1xuICAgICAgICBjb25zdCBwYWNrZXQgPSB0aGlzLl9iZWdpblBhY2tldCgweDI5KVxuICAgICAgICAgICAgLnB1dFN0cmluZzI1Nihjb250YWluZXJUaXRsZSlcbiAgICAgICAgICAgIC5wdXRTdHJpbmcodGFpbE51bWJlciwgMTIpO1xuXG4gICAgICAgIGluaXRQb3Mud3JpdGVUbyhwYWNrZXQpO1xuICAgICAgICBwYWNrZXQucHV0SW50MzIoZGF0YVJlcXVlc3RJZCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChwYWNrZXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBhSUNyZWF0ZVNpbXVsYXRlZE9iamVjdChcbiAgICAgICAgY29udGFpbmVyVGl0bGU6IHN0cmluZyxcbiAgICAgICAgaW5pdFBvczogSW5pdFBvc2l0aW9uLFxuICAgICAgICBkYXRhUmVxdWVzdElkOiBEYXRhUmVxdWVzdElkXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgcGFja2V0ID0gdGhpcy5fYmVnaW5QYWNrZXQoMHgyYSk7XG5cbiAgICAgICAgcGFja2V0LnB1dFN0cmluZzI1Nihjb250YWluZXJUaXRsZSk7XG4gICAgICAgIGluaXRQb3Mud3JpdGVUbyhwYWNrZXQpO1xuICAgICAgICBwYWNrZXQucHV0SW50MzIoZGF0YVJlcXVlc3RJZCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChwYWNrZXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBhSVJlbGVhc2VDb250cm9sKG9iamVjdElkOiBPYmplY3RJZCwgZGF0YVJlcXVlc3RJZDogRGF0YVJlcXVlc3RJZCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDJiKSAvL1xuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihvYmplY3RJZClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoZGF0YVJlcXVlc3RJZClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgYUlSZW1vdmVPYmplY3Qob2JqZWN0SWQ6IE9iamVjdElkLCBkYXRhUmVxdWVzdElkOiBEYXRhUmVxdWVzdElkKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4MmMpIC8vXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKG9iamVjdElkKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihkYXRhUmVxdWVzdElkKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBhSVNldEFpcmNyYWZ0RmxpZ2h0UGxhbihcbiAgICAgICAgb2JqZWN0SWQ6IE9iamVjdElkLFxuICAgICAgICBmbGlnaHRQbGFuUGF0aDogc3RyaW5nLFxuICAgICAgICBkYXRhUmVxdWVzdElkOiBEYXRhUmVxdWVzdElkXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4MmQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKG9iamVjdElkKVxuICAgICAgICAgICAgICAgIC5wdXRTdHJpbmcoZmxpZ2h0UGxhblBhdGgsIDI2MClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoZGF0YVJlcXVlc3RJZClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgZXhlY3V0ZU1pc3Npb25BY3Rpb24oZ3VpZEluc3RhbmNlSWQ6IEJ1ZmZlcik6IG51bWJlciB7XG4gICAgICAgIGlmIChndWlkSW5zdGFuY2VJZC5sZW5ndGggIT09IDE2KSB0aHJvdyBFcnJvcihTaW1Db25uZWN0RXJyb3IuR3VpZEludmFsaWRTaXplKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgyZSkgLy9cbiAgICAgICAgICAgICAgICAucHV0Qnl0ZXMoZ3VpZEluc3RhbmNlSWQpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGNvbXBsZXRlQ3VzdG9tTWlzc2lvbkFjdGlvbihndWlkSW5zdGFuY2VJZDogQnVmZmVyKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKGd1aWRJbnN0YW5jZUlkLmxlbmd0aCAhPT0gMTYpIHRocm93IEVycm9yKFNpbUNvbm5lY3RFcnJvci5HdWlkSW52YWxpZFNpemUpOyAvLyAkTk9OLU5MUy0xJFxuXG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDJmKSAvL1xuICAgICAgICAgICAgICAgIC5wdXRCeXRlcyhndWlkSW5zdGFuY2VJZClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgY2FtZXJhU2V0UmVsYXRpdmU2RE9GKFxuICAgICAgICBkZWx0YVg6IG51bWJlcixcbiAgICAgICAgZGVsdGFZOiBudW1iZXIsXG4gICAgICAgIGRlbHRhWjogbnVtYmVyLFxuICAgICAgICBwaXRjaERlZzogbnVtYmVyLFxuICAgICAgICBiYW5rRGVnOiBudW1iZXIsXG4gICAgICAgIGhlYWRpbmdEZWc6IG51bWJlclxuICAgICk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDMwKVxuICAgICAgICAgICAgICAgIC5wdXRGbG9hdDMyKGRlbHRhWClcbiAgICAgICAgICAgICAgICAucHV0RmxvYXQzMihkZWx0YVkpXG4gICAgICAgICAgICAgICAgLnB1dEZsb2F0MzIoZGVsdGFaKVxuICAgICAgICAgICAgICAgIC5wdXRGbG9hdDMyKHBpdGNoRGVnKVxuICAgICAgICAgICAgICAgIC5wdXRGbG9hdDMyKGJhbmtEZWcpXG4gICAgICAgICAgICAgICAgLnB1dEZsb2F0MzIoaGVhZGluZ0RlZylcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSBNU0ZTIChLaXR0eUhhd2spXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBtZW51QWRkSXRlbShtZW51SXRlbTogc3RyaW5nLCBtZW51RXZlbnRJZDogQ2xpZW50RXZlbnRJZCwgZGF0YTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4MzEpIC8vXG4gICAgICAgICAgICAgICAgLnB1dFN0cmluZzI1NihtZW51SXRlbSlcbiAgICAgICAgICAgICAgICAucHV0SW50MzIobWVudUV2ZW50SWQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGRhdGEpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgTVNGUyAoS2l0dHlIYXdrKVxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgbWVudURlbGV0ZUl0ZW0obWVudUV2ZW50SWQ6IENsaWVudEV2ZW50SWQpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgzMikgLy9cbiAgICAgICAgICAgICAgICAucHV0SW50MzIobWVudUV2ZW50SWQpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgTVNGUyAoS2l0dHlIYXdrKVxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgbWVudUFkZFN1Ykl0ZW0oXG4gICAgICAgIG1lbnVFdmVudElkOiBDbGllbnRFdmVudElkLFxuICAgICAgICBtZW51SXRlbTogc3RyaW5nLFxuICAgICAgICBzdWJNZW51RXZlbnRJZDogQ2xpZW50RXZlbnRJZCxcbiAgICAgICAgZGF0YTogbnVtYmVyXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDMzKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihtZW51RXZlbnRJZClcbiAgICAgICAgICAgICAgICAucHV0U3RyaW5nMjU2KG1lbnVJdGVtKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihzdWJNZW51RXZlbnRJZClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoZGF0YSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSBNU0ZTIChLaXR0eUhhd2spXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBtZW51RGVsZXRlU3ViSXRlbShtZW51RXZlbnRJZDogQ2xpZW50RXZlbnRJZCwgc3ViTWVudUV2ZW50SWQ6IENsaWVudEV2ZW50SWQpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgzNCkgLy9cbiAgICAgICAgICAgICAgICAucHV0SW50MzIobWVudUV2ZW50SWQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKHN1Yk1lbnVFdmVudElkKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICByZXF1ZXN0U3lzdGVtU3RhdGUoZGF0YVJlcXVlc3RJZDogRGF0YVJlcXVlc3RJZCwgc3RhdGU6IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDM1KSAvL1xuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihkYXRhUmVxdWVzdElkKVxuICAgICAgICAgICAgICAgIC5wdXRTdHJpbmcyNTYoc3RhdGUpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHNldFN5c3RlbVN0YXRlKFxuICAgICAgICBzdGF0ZTogc3RyaW5nLFxuICAgICAgICBwYXJhbUludDogbnVtYmVyLFxuICAgICAgICBwYXJhbUZsb2F0OiBudW1iZXIsXG4gICAgICAgIHBhcmFtU3RyaW5nOiBzdHJpbmdcbiAgICApOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgzNilcbiAgICAgICAgICAgICAgICAucHV0U3RyaW5nMjU2KHN0YXRlKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihwYXJhbUludClcbiAgICAgICAgICAgICAgICAucHV0RmxvYXQzMihwYXJhbUZsb2F0KVxuICAgICAgICAgICAgICAgIC5wdXRTdHJpbmcyNTYocGFyYW1TdHJpbmcpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKDApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIG1hcENsaWVudERhdGFOYW1lVG9JRChjbGllbnREYXRhTmFtZTogc3RyaW5nLCBjbGllbnREYXRhSWQ6IENsaWVudERhdGFJZCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDM3KSAvL1xuICAgICAgICAgICAgICAgIC5wdXRTdHJpbmcyNTYoY2xpZW50RGF0YU5hbWUpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGNsaWVudERhdGFJZClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgY3JlYXRlQ2xpZW50RGF0YShjbGllbnREYXRhSWQ6IENsaWVudERhdGFJZCwgc2l6ZTogbnVtYmVyLCByZWFkT25seTogYm9vbGVhbik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDM4KVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihjbGllbnREYXRhSWQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKHNpemUpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKHJlYWRPbmx5ID8gMSA6IDApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGFkZFRvQ2xpZW50RGF0YURlZmluaXRpb24oXG4gICAgICAgIGRhdGFEZWZpbml0aW9uSWQ6IERhdGFEZWZpbml0aW9uSWQsXG4gICAgICAgIG9mZnNldDogbnVtYmVyLFxuICAgICAgICBzaXplT3JUeXBlOiBudW1iZXIsXG4gICAgICAgIGVwc2lsb24/OiBudW1iZXIsXG4gICAgICAgIGRhdHVtSWQ/OiBudW1iZXJcbiAgICApOiBudW1iZXIge1xuICAgICAgICBpZiAodGhpcy5fb3VyUHJvdG9jb2wgPCBQcm90b2NvbC5GU1hfU1AxKSB0aHJvdyBFcnJvcihTaW1Db25uZWN0RXJyb3IuQmFkVmVyc2lvbik7IC8vICROT04tTkxTLTEkXG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4MzkpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGRhdGFEZWZpbml0aW9uSWQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKG9mZnNldClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoc2l6ZU9yVHlwZSlcbiAgICAgICAgICAgICAgICAucHV0RmxvYXQzMihlcHNpbG9uIHx8IDApXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGRhdHVtSWQgfHwgMClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgY2xlYXJDbGllbnREYXRhRGVmaW5pdGlvbihkYXRhRGVmaW5pdGlvbklkOiBEYXRhRGVmaW5pdGlvbklkKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4M2EpIC8vXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGRhdGFEZWZpbml0aW9uSWQpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHJlcXVlc3RDbGllbnREYXRhPE8gZXh0ZW5kcyBudW1iZXIsIEkgZXh0ZW5kcyBudW1iZXIsIEwgZXh0ZW5kcyBudW1iZXI+KFxuICAgICAgICBjbGllbnREYXRhSWQ6IENsaWVudERhdGFJZCxcbiAgICAgICAgZGF0YVJlcXVlc3RJZDogRGF0YVJlcXVlc3RJZCxcbiAgICAgICAgY2xpZW50RGF0YURlZmluZUlEOiBDbGllbnREYXRhRGVmaW5pdGlvbklkLFxuICAgICAgICBwZXJpb2Q6IENsaWVudERhdGFQZXJpb2QsXG4gICAgICAgIGZsYWdzOiBDbGllbnREYXRhUmVxdWVzdEZsYWcsXG4gICAgICAgIG9yaWdpbj86IE8sXG4gICAgICAgIGludGVydmFsPzogSSxcbiAgICAgICAgbGltaXQ/OiBMXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuRlNYX1NQMSkgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pOyAvLyAkTk9OLU5MUy0xJFxuXG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDNiKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihjbGllbnREYXRhSWQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGRhdGFSZXF1ZXN0SWQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGNsaWVudERhdGFEZWZpbmVJRClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIocGVyaW9kKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihmbGFncylcbiAgICAgICAgICAgICAgICAucHV0SW50MzIob3JpZ2luIHx8IDApXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGludGVydmFsIHx8IDApXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGxpbWl0IHx8IDApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHNldENsaWVudERhdGEoXG4gICAgICAgIGNsaWVudERhdGFJZDogQ2xpZW50RGF0YUlkLFxuICAgICAgICBjbGllbnREYXRhRGVmaW5lSUQ6IENsaWVudERhdGFEZWZpbml0aW9uSWQsXG4gICAgICAgIHJlc2VydmVkOiBudW1iZXIsXG4gICAgICAgIGFycmF5Q291bnQ6IG51bWJlcixcbiAgICAgICAgdW5pdFNpemU6IG51bWJlcixcbiAgICAgICAgZGF0YTogQnVmZmVyXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4M2MpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGNsaWVudERhdGFJZClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoY2xpZW50RGF0YURlZmluZUlEKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMigwKSAvLyBkbyBub3QgdXNlIGFyZ1xuICAgICAgICAgICAgICAgIC5wdXRJbnQzMigxKSAvLyBkbyBub3QgdXNlIGFyZ1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IGFkZCBzdXBwb3J0IGZvciBhcnJheXMgaHR0cHM6Ly9naXRodWIuY29tL21oYXJqL2pzaW1jb25uZWN0L2Jsb2IvbWFzdGVyL3NyYy9mbGlnaHRzaW0vc2ltY29ubmVjdC9TaW1Db25uZWN0LmphdmEjTDM4MDNcbiAgICAgICAgICAgICAgICAucHV0SW50MzIodW5pdFNpemUpXG4gICAgICAgICAgICAgICAgLnB1dEJ5dGVzKGRhdGEpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGZsaWdodExvYWQoZmlsZU5hbWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDNkKSAvL1xuICAgICAgICAgICAgICAgIC5wdXRTdHJpbmcoZmlsZU5hbWUsIFNpbUNvbm5lY3RDb25zdGFudHMuTUFYX1BBVEgpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGZsaWdodFNhdmUoXG4gICAgICAgIGZpbGVOYW1lOiBzdHJpbmcsXG4gICAgICAgIHRpdGxlOiBzdHJpbmcgfCBudWxsLFxuICAgICAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgICAgICBmbGFncz86IG51bWJlciAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgLy8gcGFja2V0IHNpemUgMHg5MTggKFNQMSksIDB4QTFDIChTUDIpXG4gICAgICAgIGNvbnN0IHBhY2tldCA9IHRoaXMuX2JlZ2luUGFja2V0KDB4M2UpO1xuXG4gICAgICAgIHBhY2tldC5wdXRTdHJpbmcoZmlsZU5hbWUsIFNpbUNvbm5lY3RDb25zdGFudHMuTUFYX1BBVEgpO1xuXG4gICAgICAgIGlmICh0aGlzLl9vdXJQcm90b2NvbCA+PSBQcm90b2NvbC5GU1hfU1AyKSB7XG4gICAgICAgICAgICBwYWNrZXQucHV0U3RyaW5nKHRpdGxlID09PSBudWxsID8gZmlsZU5hbWUgOiB0aXRsZSwgU2ltQ29ubmVjdENvbnN0YW50cy5NQVhfUEFUSCk7XG4gICAgICAgIH1cblxuICAgICAgICBwYWNrZXQucHV0U3RyaW5nKGRlc2NyaXB0aW9uLCAyMDQ4KTtcbiAgICAgICAgcGFja2V0LnB1dEludDMyKFNpbUNvbm5lY3RDb25zdGFudHMuVU5VU0VEKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKHBhY2tldCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGZsaWdodFBsYW5Mb2FkKGZpbGVOYW1lOiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgzZikgLy9cbiAgICAgICAgICAgICAgICAucHV0U3RyaW5nKGZpbGVOYW1lLCBTaW1Db25uZWN0Q29uc3RhbnRzLk1BWF9QQVRIKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIE1TRlMgKEtpdHR5SGF3aylcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHRleHQoXG4gICAgICAgIHR5cGU6IFRleHRUeXBlLFxuICAgICAgICB0aW1lU2Vjb25kczogbnVtYmVyLFxuICAgICAgICBjbGllbnRFdmVudElkOiBDbGllbnRFdmVudElkLFxuICAgICAgICBtZXNzYWdlOiBzdHJpbmdcbiAgICApOiBudW1iZXIge1xuICAgICAgICBpZiAodGhpcy5fb3VyUHJvdG9jb2wgPCBQcm90b2NvbC5GU1hfU1AxKSB0aHJvdyBFcnJvcihTaW1Db25uZWN0RXJyb3IuQmFkVmVyc2lvbik7IC8vICROT04tTkxTLTEkXG5cbiAgICAgICAgY29uc3QgcGFja2V0ID0gdGhpcy5fYmVnaW5QYWNrZXQoMHg0MClcbiAgICAgICAgICAgIC5wdXRJbnQzMih0eXBlKVxuICAgICAgICAgICAgLnB1dEZsb2F0MzIodGltZVNlY29uZHMpXG4gICAgICAgICAgICAucHV0SW50MzIoY2xpZW50RXZlbnRJZCk7XG5cbiAgICAgICAgaWYgKG1lc3NhZ2UgIT09IG51bGwgJiYgbWVzc2FnZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBwYWNrZXQucHV0SW50MzIobWVzc2FnZS5sZW5ndGggKyAxKTtcbiAgICAgICAgICAgIHBhY2tldC5wdXRTdHJpbmcobWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYWNrZXQucHV0SW50MzIoMSk7XG4gICAgICAgIH1cbiAgICAgICAgcGFja2V0LnB1dEJ5dGUoMCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQocGFja2V0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSBNU0ZTIChLaXR0eUhhd2spXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBtZW51KFxuICAgICAgICB0aW1lU2Vjb25kczogbnVtYmVyLFxuICAgICAgICBjbGllbnRFdmVudElkOiBDbGllbnRFdmVudElkLFxuICAgICAgICB0aXRsZT86IHN0cmluZyxcbiAgICAgICAgcHJvbXB0Pzogc3RyaW5nLFxuICAgICAgICAuLi5pdGVtczogc3RyaW5nW11cbiAgICApOiBudW1iZXIge1xuICAgICAgICBpZiAodGhpcy5fb3VyUHJvdG9jb2wgPCBQcm90b2NvbC5GU1hfU1AxKSB0aHJvdyBFcnJvcihTaW1Db25uZWN0RXJyb3IuQmFkVmVyc2lvbik7IC8vICROT04tTkxTLTEkXG5cbiAgICAgICAgY29uc3QgcGFja2V0ID0gdGhpcy5fYmVnaW5QYWNrZXQoMHg0MClcbiAgICAgICAgICAgIC5wdXRJbnQzMihUZXh0VHlwZS5NRU5VKVxuICAgICAgICAgICAgLnB1dEZsb2F0MzIodGltZVNlY29uZHMpXG4gICAgICAgICAgICAucHV0SW50MzIoY2xpZW50RXZlbnRJZClcbiAgICAgICAgICAgIC5wdXRJbnQzMigwKTsgLy8gc2l6ZSwgd2lsbCBiZSBzZXQgbGF0ZXJcblxuICAgICAgICBpZiAoIXRpdGxlICYmICFwcm9tcHQgJiYgaXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBwYWNrZXQucHV0Qnl0ZSgwKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aXRsZSAmJiBwcm9tcHQpIHtcbiAgICAgICAgICAgIHBhY2tldFxuICAgICAgICAgICAgICAgIC5wdXRTdHJpbmcodGl0bGUpIC8vXG4gICAgICAgICAgICAgICAgLnB1dEJ5dGUoMClcbiAgICAgICAgICAgICAgICAucHV0U3RyaW5nKHByb21wdClcbiAgICAgICAgICAgICAgICAucHV0Qnl0ZSgwKTtcblxuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChzID0+IHtcbiAgICAgICAgICAgICAgICBwYWNrZXQucHV0U3RyaW5nKHMpLnB1dEJ5dGUoMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZXQgc2l6ZVxuICAgICAgICBwYWNrZXQucHV0SW50MzIocGFja2V0LmdldFJhd0J1ZmZlcigpLmdldE9mZnNldCgpIC0gMzIsIDI4KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKHBhY2tldCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHN1YnNjcmliZVRvRmFjaWxpdGllcyh0eXBlOiBGYWNpbGl0eUxpc3RUeXBlLCBjbGllbnRFdmVudElkOiBDbGllbnRFdmVudElkKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuRlNYX1NQMSkgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pOyAvLyAkTk9OLU5MUy0xJFxuXG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDQxKSAvL1xuICAgICAgICAgICAgICAgIC5wdXRJbnQzMih0eXBlKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihjbGllbnRFdmVudElkKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICB1blN1YnNjcmliZVRvRmFjaWxpdGllcyh0eXBlOiBGYWNpbGl0eUxpc3RUeXBlKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuRlNYX1NQMSkgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pOyAvLyAkTk9OLU5MUy0xJFxuXG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDQyKSAvL1xuICAgICAgICAgICAgICAgIC5wdXRJbnQzMih0eXBlKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICByZXF1ZXN0RmFjaWxpdGllc0xpc3QodHlwZTogRmFjaWxpdHlMaXN0VHlwZSwgY2xpZW50RXZlbnRJZDogQ2xpZW50RXZlbnRJZCk6IG51bWJlciB7XG4gICAgICAgIGlmICh0aGlzLl9vdXJQcm90b2NvbCA8IFByb3RvY29sLkZTWF9TUDEpIHRocm93IEVycm9yKFNpbUNvbm5lY3RFcnJvci5CYWRWZXJzaW9uKTsgLy8gJE5PTi1OTFMtMSRcblxuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHg0MykgLy9cbiAgICAgICAgICAgICAgICAucHV0SW50MzIodHlwZSlcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoY2xpZW50RXZlbnRJZClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgdHJhbnNtaXRDbGllbnRFdmVudEV4KFxuICAgICAgICBvYmplY3RJZDogT2JqZWN0SWQsXG4gICAgICAgIGNsaWVudEV2ZW50SWQ6IENsaWVudEV2ZW50SWQsXG4gICAgICAgIG5vdGlmaWNhdGlvbkdyb3VwSWQ6IE5vdGlmaWNhdGlvbkdyb3VwSWQsXG4gICAgICAgIGZsYWdzOiBFdmVudEZsYWcsXG4gICAgICAgIGRhdGEwID0gMCxcbiAgICAgICAgZGF0YTEgPSAwLFxuICAgICAgICBkYXRhMiA9IDAsXG4gICAgICAgIGRhdGEzID0gMCxcbiAgICAgICAgZGF0YTQgPSAwXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4NDQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKG9iamVjdElkKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihjbGllbnRFdmVudElkKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihub3RpZmljYXRpb25Hcm91cElkKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihmbGFncylcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoZGF0YTApXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGRhdGExKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihkYXRhMilcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoZGF0YTMpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGRhdGE0KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBhZGRUb0ZhY2lsaXR5RGVmaW5pdGlvbihkYXRhRGVmaW5pdGlvbklkOiBEYXRhRGVmaW5pdGlvbklkLCBmaWVsZE5hbWU6IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIGlmICh0aGlzLl9vdXJQcm90b2NvbCA8IFByb3RvY29sLktpdHR5SGF3aykgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDQ1KSAvL1xuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihkYXRhRGVmaW5pdGlvbklkKVxuICAgICAgICAgICAgICAgIC5wdXRTdHJpbmcyNTYoZmllbGROYW1lKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICByZXF1ZXN0RmFjaWxpdHlEYXRhKFxuICAgICAgICBkYXRhRGVmaW5pdGlvbklkOiBEYXRhRGVmaW5pdGlvbklkLFxuICAgICAgICBkYXRhUmVxdWVzdElkOiBEYXRhUmVxdWVzdElkLFxuICAgICAgICBpY2FvOiBzdHJpbmcsXG4gICAgICAgIHJlZ2lvbj86IHN0cmluZyxcbiAgICAgICAgdHlwZT86IEljYW9UeXBlXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuS2l0dHlIYXdrKSB0aHJvdyBFcnJvcihTaW1Db25uZWN0RXJyb3IuQmFkVmVyc2lvbik7XG5cbiAgICAgICAgY29uc3QgcGFja2V0ID0gdGhpcy5fYmVnaW5QYWNrZXQodHlwZSA9PT0gdW5kZWZpbmVkID8gMHg0NiA6IDB4NGEpXG4gICAgICAgICAgICAucHV0SW50MzIoZGF0YURlZmluaXRpb25JZClcbiAgICAgICAgICAgIC5wdXRJbnQzMihkYXRhUmVxdWVzdElkKVxuICAgICAgICAgICAgLnB1dFN0cmluZyhpY2FvLCAxNilcbiAgICAgICAgICAgIC5wdXRTdHJpbmcocmVnaW9uIHx8ICcnLCA0KTtcblxuICAgICAgICBpZiAodHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBTaW1Db25uZWN0X1JlcXVlc3RGYWNpbGl0eURhdGFcbiAgICAgICAgICAgIHBhY2tldC5wdXRTdHJpbmcodHlwZSwgMSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKHBhY2tldCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHN1YnNjcmliZVRvRmFjaWxpdGllc0V4MShcbiAgICAgICAgdHlwZTogRmFjaWxpdHlMaXN0VHlwZSxcbiAgICAgICAgbmV3RWxlbUluUmFuZ2VSZXF1ZXN0SUQ6IERhdGFSZXF1ZXN0SWQsXG4gICAgICAgIG9sZEVsZW1PdXRSYW5nZVJlcXVlc3RJRDogRGF0YVJlcXVlc3RJZFxuICAgICk6IG51bWJlciB7XG4gICAgICAgIGlmICh0aGlzLl9vdXJQcm90b2NvbCA8IFByb3RvY29sLktpdHR5SGF3aykgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pOyAvLyAkTk9OLU5MUy0xJFxuXG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDQ3KSAvL1xuICAgICAgICAgICAgICAgIC5wdXRJbnQzMih0eXBlKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihuZXdFbGVtSW5SYW5nZVJlcXVlc3RJRClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIob2xkRWxlbU91dFJhbmdlUmVxdWVzdElEKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICB1blN1YnNjcmliZVRvRmFjaWxpdGllc0V4MShcbiAgICAgICAgdHlwZTogRmFjaWxpdHlMaXN0VHlwZSxcbiAgICAgICAgdW5zdWJzY3JpYmVOZXdJblJhbmdlOiBib29sZWFuLFxuICAgICAgICB1bnN1YnNjcmliZU9sZE91dFJhbmdlOiBib29sZWFuXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuRlNYX1NQMSkgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pOyAvLyAkTk9OLU5MUy0xJFxuXG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQoXG4gICAgICAgICAgICB0aGlzLl9iZWdpblBhY2tldCgweDQ4KSAvL1xuICAgICAgICAgICAgICAgIC5wdXRJbnQzMih0eXBlKVxuICAgICAgICAgICAgICAgIC5wdXRCeXRlKHVuc3Vic2NyaWJlTmV3SW5SYW5nZSA/IDEgOiAwKVxuICAgICAgICAgICAgICAgIC5wdXRCeXRlKHVuc3Vic2NyaWJlT2xkT3V0UmFuZ2UgPyAxIDogMClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgcmVxdWVzdEZhY2lsaXRpZXNMaXN0RXgxKHR5cGU6IEZhY2lsaXR5TGlzdFR5cGUsIGNsaWVudEV2ZW50SWQ6IENsaWVudEV2ZW50SWQpOiBudW1iZXIge1xuICAgICAgICBpZiAodGhpcy5fb3VyUHJvdG9jb2wgPCBQcm90b2NvbC5LaXR0eUhhd2spIHRocm93IEVycm9yKFNpbUNvbm5lY3RFcnJvci5CYWRWZXJzaW9uKTsgLy8gJE5PTi1OTFMtMSRcblxuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHg0OSkgLy9cbiAgICAgICAgICAgICAgICAucHV0SW50MzIodHlwZSlcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoY2xpZW50RXZlbnRJZClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgcmVxdWVzdEpldHdheURhdGEoYWlycG9ydEljYW86IHN0cmluZywgcGFya2luZ0luZGljZXM/OiBudW1iZXJbXSk6IG51bWJlciB7XG4gICAgICAgIGlmICh0aGlzLl9vdXJQcm90b2NvbCA8IFByb3RvY29sLktpdHR5SGF3aykgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pO1xuXG4gICAgICAgIGNvbnN0IHBhY2tldCA9IHRoaXMuX2JlZ2luUGFja2V0KDB4NGIpXG4gICAgICAgICAgICAucHV0U3RyaW5nKGFpcnBvcnRJY2FvLCAxNilcbiAgICAgICAgICAgIC5wdXRJbnQzMihwYXJraW5nSW5kaWNlcz8ubGVuZ3RoIHx8IDApO1xuXG4gICAgICAgIGlmIChwYXJraW5nSW5kaWNlcyA9PT0gdW5kZWZpbmVkIHx8IHBhcmtpbmdJbmRpY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcGFja2V0LnB1dEludDMyKDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFya2luZ0luZGljZXMuZm9yRWFjaChwYXJraW5nSW5kZXggPT4ge1xuICAgICAgICAgICAgICAgIHBhY2tldC5wdXRJbnQzMihwYXJraW5nSW5kZXgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKHBhY2tldCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGVudW1lcmF0ZUNvbnRyb2xsZXJzKCk6IG51bWJlciB7XG4gICAgICAgIGlmICh0aGlzLl9vdXJQcm90b2NvbCA8IFByb3RvY29sLktpdHR5SGF3aykgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pO1xuXG4gICAgICAgIGNvbnN0IHBhY2tldCA9IHRoaXMuX2JlZ2luUGFja2V0KDB4NGMpO1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKHBhY2tldCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIG1hcElucHV0RXZlbnRUb0NsaWVudEV2ZW50RXgxKFxuICAgICAgICBpbnB1dEdyb3VwSWQ6IElucHV0R3JvdXBJZCxcbiAgICAgICAgaW5wdXREZWZpbml0aW9uOiBzdHJpbmcsXG4gICAgICAgIGNsaWVudEV2ZW50RG93bklEOiBDbGllbnRFdmVudElkLFxuICAgICAgICBkb3duVmFsdWU/OiBudW1iZXIsIC8vIDBcbiAgICAgICAgY2xpZW50RXZlbnRVcElEPzogQ2xpZW50RXZlbnRJZCwgLy8gU2ltQ29ubmVjdENvbnN0YW50cy5VTlVTRURcbiAgICAgICAgdXBWYWx1ZT86IG51bWJlciwgLy8gMCxcbiAgICAgICAgbWFza2FibGU/OiBib29sZWFuIC8vIGZhbHNlXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuS2l0dHlIYXdrKSB0aHJvdyBFcnJvcihTaW1Db25uZWN0RXJyb3IuQmFkVmVyc2lvbik7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luUGFja2V0KDB4NGQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGlucHV0R3JvdXBJZClcbiAgICAgICAgICAgICAgICAucHV0U3RyaW5nMjU2KGlucHV0RGVmaW5pdGlvbilcbiAgICAgICAgICAgICAgICAucHV0SW50MzIoY2xpZW50RXZlbnREb3duSUQpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKGRvd25WYWx1ZSB8fCAwKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50RXZlbnRVcElEID09PSB1bmRlZmluZWQgPyBTaW1Db25uZWN0Q29uc3RhbnRzLlVOVVNFRCA6IGNsaWVudEV2ZW50VXBJRFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAucHV0SW50MzIodXBWYWx1ZSB8fCAwKVxuICAgICAgICAgICAgICAgIC5wdXRJbnQzMihtYXNrYWJsZSA/IDEgOiAwKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlZSBodHRwczovL3d3dy5mc2RldmVsb3Blci5jb20vd2lraS9pbmRleC5waHAvTVNGU19NaXNzaW9uX1NjcmlwdF8tX0FjdGlvbnNcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgZXhlY3V0ZUFjdGlvbihkYXRhUmVxdWVzdElEOiBudW1iZXIsIGFjdGlvbklEOiBzdHJpbmcsIHZhbHVlczogUmF3QnVmZmVyKSB7XG4gICAgICAgIGlmICh0aGlzLl9vdXJQcm90b2NvbCA8IFByb3RvY29sLktpdHR5SGF3aykgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pO1xuXG4gICAgICAgIGNvbnN0IHBhcmFtVmFsdWVzID0gdmFsdWVzLmdldEJ1ZmZlcigpO1xuXG4gICAgICAgIGNvbnN0IHBhY2tldCA9IHRoaXMuX2JlZ2luUGFja2V0KDB4NGUpXG4gICAgICAgICAgICAucHV0SW50MzIoZGF0YVJlcXVlc3RJRClcbiAgICAgICAgICAgIC5wdXRTdHJpbmcyNTYoYWN0aW9uSUQpXG4gICAgICAgICAgICAucHV0SW50MzIocGFyYW1WYWx1ZXMubGVuZ3RoKVxuICAgICAgICAgICAgLnB1dEJ5dGVzKHBhcmFtVmFsdWVzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChwYWNrZXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBlbnVtZXJhdGVJbnB1dEV2ZW50cyhkYXRhUmVxdWVzdElEOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBpZiAodGhpcy5fb3VyUHJvdG9jb2wgPCBQcm90b2NvbC5LaXR0eUhhd2spIHRocm93IEVycm9yKFNpbUNvbm5lY3RFcnJvci5CYWRWZXJzaW9uKTtcblxuICAgICAgICBjb25zdCBwYWNrZXQgPSB0aGlzLl9iZWdpblBhY2tldCgweDRmKS5wdXRJbnQzMihkYXRhUmVxdWVzdElEKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChwYWNrZXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBnZXRJbnB1dEV2ZW50KGRhdGFSZXF1ZXN0SUQ6IG51bWJlciwgaW5wdXRFdmVudEhhc2hJRDogYmlnaW50KTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuS2l0dHlIYXdrKSB0aHJvdyBFcnJvcihTaW1Db25uZWN0RXJyb3IuQmFkVmVyc2lvbik7XG5cbiAgICAgICAgY29uc3QgcGFja2V0ID0gdGhpcy5fYmVnaW5QYWNrZXQoMHg1MCkucHV0SW50MzIoZGF0YVJlcXVlc3RJRCkucHV0VWludDY0KGlucHV0RXZlbnRIYXNoSUQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKHBhY2tldCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHNldElucHV0RXZlbnQoaW5wdXRFdmVudEhhc2hJRDogYmlnaW50LCB2YWx1ZTogbnVtYmVyIHwgc3RyaW5nKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuS2l0dHlIYXdrKSB0aHJvdyBFcnJvcihTaW1Db25uZWN0RXJyb3IuQmFkVmVyc2lvbik7XG5cbiAgICAgICAgY29uc3QgcGFja2V0ID0gdGhpcy5fYmVnaW5QYWNrZXQoMHg1MSkucHV0VWludDY0KGlucHV0RXZlbnRIYXNoSUQpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBwYWNrZXQucHV0SW50MzIodmFsdWUubGVuZ3RoKS5wdXRTdHJpbmcodmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFja2V0LnB1dEludDMyKDgpLnB1dEZsb2F0NjQodmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZChwYWNrZXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBzdWJzY3JpYmVJbnB1dEV2ZW50KGlucHV0RXZlbnRIYXNoSUQ6IGJpZ2ludCk6IG51bWJlciB7XG4gICAgICAgIGlmICh0aGlzLl9vdXJQcm90b2NvbCA8IFByb3RvY29sLktpdHR5SGF3aykgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQodGhpcy5fYmVnaW5QYWNrZXQoMHg1MikucHV0VWludDY0KGlucHV0RXZlbnRIYXNoSUQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgdW5zdWJzY3JpYmVJbnB1dEV2ZW50KGlucHV0RXZlbnRIYXNoSUQ6IGJpZ2ludCk6IG51bWJlciB7XG4gICAgICAgIGlmICh0aGlzLl9vdXJQcm90b2NvbCA8IFByb3RvY29sLktpdHR5SGF3aykgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZEFuZFNlbmQodGhpcy5fYmVnaW5QYWNrZXQoMHg1MykucHV0VWludDY0KGlucHV0RXZlbnRIYXNoSUQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgZW51bWVyYXRlSW5wdXRFdmVudFBhcmFtcyhpbnB1dEV2ZW50SGFzaElEOiBiaWdpbnQpOiBudW1iZXIge1xuICAgICAgICBpZiAodGhpcy5fb3VyUHJvdG9jb2wgPCBQcm90b2NvbC5LaXR0eUhhd2spIHRocm93IEVycm9yKFNpbUNvbm5lY3RFcnJvci5CYWRWZXJzaW9uKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKHRoaXMuX2JlZ2luUGFja2V0KDB4NTQpLnB1dFVpbnQ2NChpbnB1dEV2ZW50SGFzaElEKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YURlZmluaXRpb25JZCAtXG4gICAgICogQHBhcmFtIGZpbHRlclBhdGggLVxuICAgICAqIEBwYXJhbSBmaWx0ZXJEYXRhIC0gdXNlIG51bGwgdG8gcmVtb3ZlIGEgcHJldmlvdXNseSBhcHBsaWVkIGZpbHRlclxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBhZGRGYWNpbGl0eURhdGFEZWZpbml0aW9uRmlsdGVyKFxuICAgICAgICBkYXRhRGVmaW5pdGlvbklkOiBEYXRhRGVmaW5pdGlvbklkLFxuICAgICAgICBmaWx0ZXJQYXRoOiBzdHJpbmcsXG4gICAgICAgIGZpbHRlckRhdGE6IFJhd0J1ZmZlciB8IG51bGxcbiAgICApIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuS2l0dHlIYXdrKSB0aHJvdyBFcnJvcihTaW1Db25uZWN0RXJyb3IuQmFkVmVyc2lvbik7XG5cbiAgICAgICAgY29uc3QgcGFja2V0ID0gdGhpcy5fYmVnaW5QYWNrZXQoMHg1NSkucHV0SW50MzIoZGF0YURlZmluaXRpb25JZCkucHV0U3RyaW5nMjU2KGZpbHRlclBhdGgpO1xuXG4gICAgICAgIGlmIChmaWx0ZXJEYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICBwYWNrZXQucHV0SW50MzIoMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJEYXRhQnVmZmVyID0gZmlsdGVyRGF0YS5nZXRCdWZmZXIoKTtcbiAgICAgICAgICAgIHBhY2tldC5wdXRJbnQzMihmaWx0ZXJEYXRhQnVmZmVyLmxlbmd0aCkucHV0Qnl0ZXMoZmlsdGVyRGF0YUJ1ZmZlcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRBbmRTZW5kKHBhY2tldCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGNsZWFyQWxsRmFjaWxpdHlEYXRhRGVmaW5pdGlvbkZpbHRlcnMoZGF0YURlZmluaXRpb25JZDogRGF0YURlZmluaXRpb25JZCkge1xuICAgICAgICBpZiAodGhpcy5fb3VyUHJvdG9jb2wgPCBQcm90b2NvbC5LaXR0eUhhd2spIHRocm93IEVycm9yKFNpbUNvbm5lY3RFcnJvci5CYWRWZXJzaW9uKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkQW5kU2VuZCh0aGlzLl9iZWdpblBhY2tldCgweDU2KS5wdXRJbnQzMihkYXRhRGVmaW5pdGlvbklkKSk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLl9vcGVuVGltZW91dCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX29wZW5UaW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMuX29wZW5UaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jbGllbnRTb2NrZXQuY2xvc2UoKTtcbiAgICB9XG5cbiAgICBnZXRMYXN0U2VudFBhY2tldElEKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFja2V0c1NlbnQgLSAxO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2JlZ2luUGFja2V0KHBhY2tldElkOiBudW1iZXIpOiBTaW1Db25uZWN0UGFja2V0QnVpbGRlciB7XG4gICAgICAgIHJldHVybiBuZXcgU2ltQ29ubmVjdFBhY2tldEJ1aWxkZXIocGFja2V0SWQsIHRoaXMuX291clByb3RvY29sLCB0aGlzLl9wYWNrZXREYXRhQnVmZmVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9idWlsZEFuZFNlbmQoYnVpbGRlcjogU2ltQ29ubmVjdFBhY2tldEJ1aWxkZXIpOiBudW1iZXIge1xuICAgICAgICBjb25zdCB0aGlzUGFja2V0SWQgPSB0aGlzLl9wYWNrZXRzU2VudDtcbiAgICAgICAgdGhpcy5fY2xpZW50U29ja2V0LndyaXRlKGJ1aWxkZXIuYnVpbGQodGhpc1BhY2tldElkKSk7XG4gICAgICAgIHRoaXMuX3BhY2tldHNTZW50Kys7XG4gICAgICAgIHJldHVybiB0aGlzUGFja2V0SWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaGFuZGxlTWVzc2FnZSh7IHBhY2tldFR5cGVJZCwgZGF0YSB9OiBTaW1Db25uZWN0TWVzc2FnZSkge1xuICAgICAgICBpZiAoIShwYWNrZXRUeXBlSWQgaW4gUmVjdklEKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Vua25vd24gcGFja2V0IHR5cGUgaWQnLCBwYWNrZXRUeXBlSWQsIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoIChwYWNrZXRUeXBlSWQpIHtcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX05VTEw6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9FWENFUFRJT046XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdleGNlcHRpb24nLCBuZXcgUmVjdkV4Y2VwdGlvbihkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9PUEVOOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vcGVuVGltZW91dCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fb3BlblRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vcGVuVGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnb3BlbicsIG5ldyBSZWN2T3BlbihkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9RVUlUOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgncXVpdCcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfRVZFTlQ6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdldmVudCcsIG5ldyBSZWN2RXZlbnQoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfRVZFTlRfT0JKRUNUX0FERFJFTU9WRTpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2V2ZW50QWRkUmVtb3ZlJywgbmV3IFJlY3ZFdmVudEFkZFJlbW92ZShkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9FVkVOVF9GSUxFTkFNRTpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2V2ZW50RmlsZW5hbWUnLCBuZXcgUmVjdkV2ZW50RmlsZW5hbWUoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfRVZFTlRfRlJBTUU6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdldmVudEZyYW1lJywgbmV3IFJlY3ZFdmVudEZyYW1lKGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX1NJTU9CSkVDVF9EQVRBOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnc2ltT2JqZWN0RGF0YScsIG5ldyBSZWN2U2ltT2JqZWN0RGF0YShkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9TSU1PQkpFQ1RfREFUQV9CWVRZUEU6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdzaW1PYmplY3REYXRhQnlUeXBlJywgbmV3IFJlY3ZTaW1PYmplY3REYXRhKGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX1dFQVRIRVJfT0JTRVJWQVRJT046XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCd3ZWF0aGVyT2JzZXJ2YXRpb24nLCBuZXcgUmVjdldlYXRoZXJPYnNlcnZhdGlvbihkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9DTE9VRF9TVEFURTpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Nsb3VkU3RhdGUnLCBuZXcgUmVjdkNsb3VkU3RhdGUoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfQVNTSUdORURfT0JKRUNUX0lEOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYXNzaWduZWRPYmplY3RJRCcsIG5ldyBSZWN2QXNzaWduZWRPYmplY3RJRChkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9SRVNFUlZFRF9LRVk6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdyZXNlcnZlZEtleScsIG5ldyBSZWN2UmVzZXJ2ZWRLZXkoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfQ1VTVE9NX0FDVElPTjpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2N1c3RvbUFjdGlvbicsIG5ldyBSZWN2Q3VzdG9tQWN0aW9uKGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX1NZU1RFTV9TVEFURTpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3N5c3RlbVN0YXRlJywgbmV3IFJlY3ZTeXN0ZW1TdGF0ZShkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9DTElFTlRfREFUQTpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2NsaWVudERhdGEnLCBuZXcgUmVjdlNpbU9iamVjdERhdGEoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfRVZFTlRfV0VBVEhFUl9NT0RFOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXZlbnRXZWF0aGVyTW9kZScsIG5ldyBSZWN2RXZlbnRXZWF0aGVyTW9kZShkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9BSVJQT1JUX0xJU1Q6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhaXJwb3J0TGlzdCcsIG5ldyBSZWN2QWlycG9ydExpc3QoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfVk9SX0xJU1Q6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCd2b3JMaXN0JywgbmV3IFJlY3ZWT1JMaXN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX05EQl9MSVNUOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbmRiTGlzdCcsIG5ldyBSZWN2TkRCTGlzdChkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9XQVlQT0lOVF9MSVNUOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnd2F5cG9pbnRMaXN0JywgbmV3IFJlY3ZXYXlwb2ludExpc3QoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfRVZFTlRfTVVMVElQTEFZRVJfU0VSVkVSX1NUQVJURUQ6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdldmVudE11bHRpcGxheWVyU2VydmVyU3RhcnRlZCcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfRVZFTlRfTVVMVElQTEFZRVJfQ0xJRU5UX1NUQVJURUQ6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdldmVudE11bHRpcGxheWVyQ2xpZW50U3RhcnRlZCcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfRVZFTlRfTVVMVElQTEFZRVJfU0VTU0lPTl9FTkRFRDpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2V2ZW50TXVsdGlwbGF5ZXJTZXNzaW9uRW5kZWQnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX0VWRU5UX1JBQ0VfRU5EOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXZlbnRSYWNlRW5kJywgbmV3IFJlY3ZFdmVudFJhY2VFbmQoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfRVZFTlRfUkFDRV9MQVA6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdldmVudFJhY2VMYXAnLCBuZXcgUmVjdkV2ZW50UmFjZUxhcChkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9FVkVOVF9FWDE6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdldmVudEV4MScsIG5ldyBSZWN2RXZlbnRFeDEoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfRkFDSUxJVFlfREFUQTpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2ZhY2lsaXR5RGF0YScsIG5ldyBSZWN2RmFjaWxpdHlEYXRhKGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX0ZBQ0lMSVRZX0RBVEFfRU5EOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZmFjaWxpdHlEYXRhRW5kJywgbmV3IFJlY3ZGYWNpbGl0eURhdGFFbmQoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfRkFDSUxJVFlfTUlOSU1BTF9MSVNUOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZmFjaWxpdHlNaW5pbWFsTGlzdCcsIG5ldyBSZWN2RmFjaWxpdHlNaW5pbWFsTGlzdChkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9KRVRXQVlfREFUQTpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2pldHdheURhdGEnLCBuZXcgUmVjdkpldHdheURhdGEoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfQ09OVFJPTExFUlNfTElTVDpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2NvbnRyb2xsZXJzTGlzdCcsIG5ldyBSZWN2Q29udHJvbGxlcnNMaXN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX0FDVElPTl9DQUxMQkFDSzpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FjdGlvbkNhbGxiYWNrJywgbmV3IFJlY3ZBY3Rpb25DYWxsYmFjayhkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9FTlVNRVJBVEVfSU5QVVRfRVZFTlRTOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaW5wdXRFdmVudHNMaXN0JywgbmV3IFJlY3ZFbnVtZXJhdGVJbnB1dEV2ZW50cyhkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9HRVRfSU5QVVRfRVZFTlQ6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdnZXRJbnB1dEV2ZW50JywgbmV3IFJlY3ZHZXRJbnB1dEV2ZW50KGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX1NVQlNDUklCRV9JTlBVVF9FVkVOVDpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3N1YnNjcmliZUlucHV0RXZlbnQnLCBuZXcgUmVjdlN1YnNjcmliZUlucHV0RXZlbnQoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfRU5VTUVSQVRFX0lOUFVUX0VWRU5UX1BBUkFNUzpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2VudW1lcmF0ZUlucHV0RXZlbnRQYXJhbXMnLCBuZXcgUmVjdkVudW1lcmF0ZUlucHV0RXZlbnRQYXJhbXMoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfb3BlbigpIHtcbiAgICAgICAgdGhpcy5fb3BlblRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBFcnJvcignT3BlbiB0aW1lb3V0JykpO1xuICAgICAgICB9LCA1MDAwKTtcblxuICAgICAgICBjb25zdCB2ZXJzaW9uID0gb3BlblBhY2tldERhdGFbdGhpcy5fb3VyUHJvdG9jb2xdO1xuICAgICAgICBpZiAoIXZlcnNpb24pIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFNpbUNvbm5lY3RFcnJvci5JbnZhbGlkUHJvdG9jb2wpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fYnVpbGRBbmRTZW5kKFxuICAgICAgICAgICAgdGhpcy5fYmVnaW5QYWNrZXQoMHgwMSlcbiAgICAgICAgICAgICAgICAucHV0U3RyaW5nMjU2KHRoaXMuX2FwcE5hbWUpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKDApXG4gICAgICAgICAgICAgICAgLnB1dEJ5dGUoMHgwMClcbiAgICAgICAgICAgICAgICAucHV0U3RyaW5nKHZlcnNpb24uYWxpYXMsIDMpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKHZlcnNpb24ubWFqb3IpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKHZlcnNpb24ubWlub3IpXG4gICAgICAgICAgICAgICAgLnB1dEludDMyKHZlcnNpb24uYnVpbGRNYWpvcilcbiAgICAgICAgICAgICAgICAucHV0SW50MzIodmVyc2lvbi5idWlsZE1pbm9yKVxuICAgICAgICApO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgU2ltQ29ubmVjdENvbm5lY3Rpb24sIENvbm5lY3Rpb25PcHRpb25zLCBTaW1Db25uZWN0UmVjdkV2ZW50cyB9O1xubW9kdWxlLmV4cG9ydHMgPSB7IFNpbUNvbm5lY3RDb25uZWN0aW9uIH07XG4iXX0=